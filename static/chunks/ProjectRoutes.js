import{d as N}from"./vuedraggable.umd.js";import{d as P,D as m,E as z,F as I,b as j,k as i,u as a,l as v,w as _,e as t,a3 as O,a as x,U as T,t as d}from"./vendor.js";import{s as L}from"./menu.esm.js";import{u as M,a as Q,S as G,_ as J}from"./useFormRequestBuilder.js";import{_ as K}from"./FormQuery.js";import{_ as W}from"./DialogDelete.js";import{_ as X}from"./BarTool.js";import{f as Y}from"./FormRoute.js";import{A as Z,u as ee}from"../main.js";import{u as le}from"./useRightClickHandler.js";import"./overlayeventbus.esm.js";import"./rules.js";const te={id:"project_routes",class:"relative panel-board"},se={class:"part-wrap"},ae={class:"spreadsheet-wrapper overflow-x"},oe=O('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8</div><div class="sheet-cell value flex align-center">\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30D1\u30CD\u30EB\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell value flex align-center">URL\u30D1\u30B9</div><div class="sheet-cell value flex align-center">\u30A2\u30AF\u30C6\u30A3\u30D6</div></div></div>',1),ue=["onClick","onContextmenu"],ne=t("div",{class:"sheet-cell handle flex align-center handle grab"},[t("i",{class:"pi pi-bars"})],-1),ie={class:"sheet-cell num flex align-center"},re={class:"text block"},ce={class:"sheet-cell sheet-cell value flex align-center"},de={class:"text block"},pe={class:"sheet-cell value flex align-center"},ve={class:"text block"},me={class:"sheet-cell value flex align-center"},_e={class:"text block"},fe={class:"sheet-cell value flex align-center"},he={class:"text block"},ge={class:"sheet-cell value flex align-center"},je={class:"text block"},xe={class:"sheet-cell value flex align-center"},be={class:"context block"},Ce={key:0,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#2ecc71"}},ke={key:1,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#e74c3c"}},Fe={class:"button-wrapper flex justify-end"},ze=P({setup(ye){var k,F;const{get:f,save:B}=Z(),{submit:D,submitRowReorder:V,remove:b}=M(),{d:r,dr:n,data:u,useToggle:h}=Q(),{rcm:w,rcmOpened:Be,isRCOn:R}=le(u),{payload:De,content:c,progress:A,project:o}=ee(),g=m(!1),C=m(!1),p=m(((k=o.value)==null?void 0:k.routes)||[]),E=z({id:null,project:((F=o.value)==null?void 0:F.id)||null,order_id:null,component:null,name:null,panel_name:null,path:null,title:null,active:!1});function $(){var s;g.value=!1,h({method:"post",endpoints:["app/routes","project_details/"+((s=o.value)==null?void 0:s.id)],state:"project"})}function U(s){var e;g.value=!0,h({method:"patch",endpoints:["app/routes/"+s.id,"project_details/"+((e=o.value)==null?void 0:e.id)],state:"project"},s)}function q(){var s;C.value=!0,b("app/routes/"+((s=u.value)==null?void 0:s.id)).then(()=>{var e;n.value=!1,f("project_details/"+((e=o.value)==null?void 0:e.id),"project").then(()=>{r.value=!1,C.value=!1})})}const S=m([{label:"\u65B0\u898F\u30EB\u30FC\u30C8",command:()=>{var s;h({method:"post",endpoints:["app/routes","project_details/"+((s=o.value)==null?void 0:s.id)],state:"project"})}},{label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{var e;c.value=!0;const s={order_id:p.value?p.value.length+1:1,project:((e=o.value)==null?void 0:e.id)||null,component:u.value.component,name:u.value.name,path:u.value.path,title:u.value.title,active:u.value.active};B("app/routes",s).then(()=>{var l;f("project_details/"+((l=o.value)==null?void 0:l.id),"project").then(()=>{c.value=!1})})}},{label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{var s;c.value=!0,b("app/routes/"+((s=u.value)==null?void 0:s.id)).then(()=>{var e;f("project_details/"+((e=o.value)==null?void 0:e.id),"project").then(()=>{c.value=!1})})}}]);return I(()=>o.value,s=>{p.value=(s==null?void 0:s.routes)||[]}),(s,e)=>(x(),j("div",te,[i(G,{modelValue:a(c),"onUpdate:modelValue":e[0]||(e[0]=l=>v(c)?c.value=l:null)},null,8,["modelValue"]),i(X,{class:"justify-space-between"},{default:_(()=>[t("div",se,[i(a(T),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u65BD\u8A2D",onClick:e[1]||(e[1]=l=>$())})])]),_:1}),t("div",ae,[oe,i(a(N),{tag:"div",onEnd:e[2]||(e[2]=l=>a(V)({value:p.value},{method:"post",endpoints:["app/routes","project_details/"+a(o).id],state:"project"})),list:p.value,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:_(({element:l,index:H})=>[t("div",{onClick:y=>U(l),onContextmenu:y=>a(R)(y,l),"aria-haspopup":"true","aria-controls":"plan_rc_menu",class:"sheet-row flex align-center list-group-item relative pointer"},[i(a(L),{id:"rc_menu",ref_key:"rcm",ref:w,class:"rc has-final-action",model:S.value,popup:!0},null,8,["model"]),ne,t("div",ie,[t("span",re,d(H+1),1)]),t("div",ce,[t("span",de,d(l.component),1)]),t("div",pe,[t("span",ve,d(l.name),1)]),t("div",me,[t("span",_e,d(l.panel_name),1)]),t("div",fe,[t("span",he,d(l.title),1)]),t("div",ge,[t("span",je,d(l.path),1)]),t("div",xe,[t("span",be,[l.active?(x(),j("i",Ce)):(x(),j("i",ke))])])],40,ue)]),_:1},8,["list"])]),i(J,{modelValue:a(r),"onUpdate:modelValue":e[8]||(e[8]=l=>v(r)?r.value=l:null),title:"\u30EB\u30FC\u30C8\u30D5\u30A9\u30FC\u30E0"},{default:_(()=>[i(K,{modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=l=>v(r)?r.value=l:null),dr:a(n),"onUpdate:dr":e[4]||(e[4]=l=>v(n)?n.value=l:null),"close-after":"",topProgress:"",progress:a(A),form:a(Y),data:a(u),remove:g.value,query:a(E),submit:a(D)},null,8,["modelValue","dr","progress","form","data","remove","query","submit"]),i(W,{modelValue:a(n),"onUpdate:modelValue":e[7]||(e[7]=l=>v(n)?n.value=l:null)},{default:_(()=>[t("div",Fe,[t("button",{onClick:e[5]||(e[5]=l=>n.value=!1),class:"cancel"},"\u3044\u3044\u3048"),t("button",{onClick:e[6]||(e[6]=l=>q()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{ze as default};
