import{D as q}from"./vuedraggable.umd.js";import{a as R,C as f,M as S,q as U,f as u,t,D as c,w as v,x as a,W as I,b as T,G as H,A as b}from"./vendor.js";import{s as N}from"./menu.esm.js";import P from"./Dialog.js";import{_ as M}from"./FormQuery.js";import{_ as O}from"./DialogDelete.js";import{S as G}from"./Spinner.js";import Q from"./BarTool.js";import{a as W,u as z}from"./useFormRequestBuilder.js";import{A as J,u as K}from"../main.js";import{u as L}from"./useRightClickHandler.js";import"./overlayeventbus.esm.js";import"./index3.js";import"./plugin-vue_export-helper.js";const X=[[{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"name",type:"text",model:null,label:"\u99D0\u8ECA\u5834\u540D",hint:null,placeholder:"140000",required:!1,id:"name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"price",type:"text",model:null,label:"\u99D0\u8ECA\u5834\u8CBB",hint:null,placeholder:"12300",required:!1,id:"price_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]}]];const Y={id:"project_parking_fees",class:"relative panel-board"},Z={class:"part-wrap"},ee={class:"spreadsheet-wrapper overflow-x"},le=I('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell sheet-cell-long flex align-center">\u99D0\u8ECA\u5834\u540D</div><div class="sheet-cell value flex align-center">\u99D0\u8ECA\u5834\u8CBB</div></div></div>',1),se=["onClick","onContextmenu"],te=a("div",{class:"sheet-cell handle flex align-center handle grab"},[a("i",{class:"pi pi-bars"})],-1),ae={class:"sheet-cell num flex align-center"},ne={class:"text block"},oe={class:"sheet-cell sheet-cell-long flex align-center"},ue={class:"text block"},ie={class:"sheet-cell value flex align-center"},re={class:"text block"},de={class:"button-wrapper flex justify-end"},Ae=R({setup(pe){var C;const{get:_,save:D}=J(),{submit:y,submitRowReorder:B,remove:j}=W(),{d:i,dr:o,data:d,useToggle:g}=z(),{rcm:V,rcmOpened:ce,isRCOn:w}=L(d),{payload:me,content:r,progress:fe,project:n}=K(),h=f(!1),x=f(!1),p=f(((C=n.value)==null?void 0:C.building.parking_fees)||[]);function A(){var l;h.value=!1,g({method:"post",endpoints:["app/parking_fees","project_details/"+((l=n.value)==null?void 0:l.id)],state:"project"})}function F(l){var e;h.value=!0,g({method:"patch",endpoints:["app/parking_fees/"+l.id,"project_details/"+((e=n.value)==null?void 0:e.id)],state:"project"},l)}function E(){var l;x.value=!0,j("app/parking_fees/"+((l=d.value)==null?void 0:l.id)).then(()=>{var e;o.value=!1,_("project_details/"+((e=n.value)==null?void 0:e.id),"project").then(()=>{i.value=!1,x.value=!1})})}const $=f([{label:"\u65B0\u898F\u30EB\u30FC\u30C8",command:()=>{var l;g({method:"post",endpoints:["app/parking_fees","project_details/"+((l=n.value)==null?void 0:l.id)],state:"project"})}},{label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{var e,s;r.value=!0;const l={order_id:p.value?p.value.length+1:1,building:((s=(e=n.value)==null?void 0:e.building)==null?void 0:s.id)||null,name:d.value.name,price:d.value.price};D("app/parking_fees",l).then(()=>{var m;_("project_details/"+((m=n.value)==null?void 0:m.id),"project").then(()=>{r.value=!1})})}},{label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{var l;r.value=!0,j("app/parking_fees/"+((l=d.value)==null?void 0:l.id)).then(()=>{var e;_("project_details/"+((e=n.value)==null?void 0:e.id),"project").then(()=>{r.value=!1})})}}]);return S(()=>n.value,l=>{p.value=(l==null?void 0:l.building.parking_fees)||[]}),(l,e)=>(T(),U("div",Y,[u(G,{modelValue:t(r),"onUpdate:modelValue":e[0]||(e[0]=s=>c(r)?r.value=s:null)},null,8,["modelValue"]),u(Q,{class:"justify-space-between"},{default:v(()=>[a("div",Z,[u(t(H),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u99D0\u8ECA\u5834\u3092\u8FFD\u52A0",onClick:e[1]||(e[1]=s=>A())})])]),_:1}),a("div",ee,[le,u(t(q),{tag:"div",onEnd:e[2]||(e[2]=s=>t(B)({value:p.value},{method:"post",endpoints:["app/parking_fees","project_details/"+t(n).id],state:"project"})),list:p.value,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:v(({element:s,index:m})=>[a("div",{onClick:k=>F(s),onContextmenu:k=>t(w)(k,s),"aria-haspopup":"true","aria-controls":"plan_rc_menu",class:"sheet-row flex align-center list-group-item relative pointer"},[u(t(N),{id:"rc_menu",ref_key:"rcm",ref:V,class:"rc has-final-action",model:$.value,popup:!0},null,8,["model"]),te,a("div",ae,[a("span",ne,b(m+1),1)]),a("div",oe,[a("span",ue,b(s.name),1)]),a("div",ie,[a("span",re,b(s.price),1)])],40,se)]),_:1},8,["list"])]),u(P,{modelValue:t(i),"onUpdate:modelValue":e[8]||(e[8]=s=>c(i)?i.value=s:null),title:"\u99D0\u8ECA\u5834\u8CBB\u30D5\u30A9\u30FC\u30E0"},{default:v(()=>[u(M,{modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=s=>c(i)?i.value=s:null),dr:t(o),"onUpdate:dr":e[4]||(e[4]=s=>c(o)?o.value=s:null),"close-after":"",form:t(X),data:t(d),remove:h.value,query:{building:t(n).building.id},submit:t(y)},null,8,["modelValue","dr","form","data","remove","query","submit"]),u(O,{modelValue:t(o),"onUpdate:modelValue":e[7]||(e[7]=s=>c(o)?o.value=s:null)},{default:v(()=>[a("div",de,[a("button",{onClick:e[5]||(e[5]=s=>o.value=!1),class:"cancel"},"\u3044\u3044\u3048"),a("button",{onClick:e[6]||(e[6]=s=>E()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Ae as default};
