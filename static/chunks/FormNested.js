import{a as q,p as k,o as w,O as M,t as P,b as e,v as a,f as g,H as x,I as d,J as m,y as h,K as c,A as p,w as _,x as D,C as z,e as E,Q as H,z as y,g as O,M as F,B as Q}from"./vendor.js";import{u as R,a as J,D as K,b as L,c as G,d as W}from"./FormQuery.js";import{S as X}from"./useFormRequestBuilder.js";import{a as Y}from"../main.js";const Z={key:0,class:"tabs flex align-center"},ee=["onClick"],ae=["onSubmit"],te={key:0,class:"label title-label"},se={class:"label flex"},le={key:0,class:"required flex align-start"},oe={key:1,class:"hint"},de=q({props:{modelValue:Boolean,loading:Boolean,selectedId:Number,activeTab:String,form:{type:Array,default:[]},onload:{type:String,default:""},progress:Number,tabs:Array},emits:["update:modelValue","update:response","update:payload","update:activeTab","update:form"],setup(n,{emit:C}){const f=n;Y();const{setDynamics:S}=L(),{setClear:N}=G(),{reform:v,setProps:U}=R(),{isElementValid:B}=W(),j=k(),r=k(!1),b=k(0);w(()=>{v.value=f.form,S(f.form.filter((o,s)=>s===b.value)).then(o=>{r.value=o})}),M(()=>{N(v.value),C("update:modelValue",!1)});const $=o=>{b.value=o,f.tabs&&C("update:activeTab",f.tabs[o])};return P(()=>b.value,o=>{r.value=!1,S(v.value).then(s=>{r.value=s})}),(o,s)=>(e(),a("div",{ref_key:"container",ref:j,id:"form"},[g(X,{modelValue:n.loading,"onUpdate:modelValue":s[0]||(s[0]=l=>x(loading)?loading.value=l:null),text:n.onload?n.onload:null},null,8,["modelValue","text"]),g(J,{id:"tpb",modelValue:n.progress,"onUpdate:modelValue":s[1]||(s[1]=l=>x(progress)?progress.value=l:null)},null,8,["modelValue"]),n.tabs?(e(),a("div",Z,[(e(!0),a(d,null,m(n.tabs,(l,u)=>(e(),a("button",{key:u,onClick:i=>$(u),class:h([{active:u===b.value},"tab flex align-center justify-center"])},c(l),11,ee))),128))])):p("",!0),g(K,{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=l=>r.value=l)},{default:_(()=>[D("form",{action:"",onSubmit:Q(l=>!0,["prevent"])},[(e(!0),a(d,null,m(y(v),(l,u)=>(e(),a("div",{key:u},[(e(!0),a(d,null,m(l,(i,A)=>(e(),a("div",{key:A,class:h(["row",i.classes])},[i.elements[0].hasOwnProperty("title")?(e(),a("span",te,c(i.elements[0].title),1)):p("",!0),(e(!0),a(d,null,m(i.elements,(t,I)=>(e(),a("div",{key:I,class:h(t.classes)},[D("span",se,[z(c(t.label)+" ",1),t.required?(e(),a("span",le,"*\u5FC5\u9808")):p("",!0)]),t.component?(e(),E(O(t.component),H({key:0,id:t.id},y(U)(t),{modelValue:t.model,"onUpdate:modelValue":V=>t.model=V,class:["cfec column-1",{error:!y(B)(t).valid}]}),null,16,["id","modelValue","onUpdate:modelValue","class"])):p("",!0),(e(!0),a(d,null,m(y(B)(t).errors,(V,T)=>(e(),a("span",{key:T,class:"invalid block"},"*"+c(V),1))),128)),t.hint&&t.name!=="FileInput"?(e(),a("span",oe,c(t.hint),1)):p("",!0)],2))),128))],2))),128)),F(o.$slots,"default")]))),128)),F(o.$slots,"actions")],40,ae)]),_:3},8,["modelValue"])],512))}});export{de as _};
