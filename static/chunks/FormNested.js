import{d as P,K as j,l as k,L as D,m as z,G as E,D as L,c as a,g,F as m,q as c,f as p,w as M,o as e,n as h,t as f,h as x,i as G,e as H,J,b as y,j as K,z as F,N as O}from"../main.js";import{u as Q,a as R,D as W,b as X,c as Y,d as Z}from"./FormQuery.js";import{S as ee}from"./Spinner.js";const ae={key:0,class:"tabs flex align-center"},te=["onClick"],se=["onSubmit"],le={key:0,class:"label title-label"},oe={class:"label flex"},ne={key:0,class:"required flex align-start"},re={key:1,class:"hint"},me=P({__name:"FormNested",props:{modelValue:Boolean,loading:Boolean,selectedId:Number,activeTab:String,form:{type:Array,default:[]},onload:{type:String,default:""},progress:Number,tabs:Array},emits:["update:modelValue","update:response","update:payload","update:activeTab","update:form"],setup(r,{emit:_}){const n=r;j();const{setDynamics:S}=X(),{setClear:U}=Y(),{reform:v,setProps:$}=Q(),{isElementValid:C}=Z(),T=k(),u=k(!1),b=k(0),N=D(()=>n.progress),B=D(()=>n.loading);z(()=>{v.value=n.form,S(n.form.filter((o,s)=>s===b.value)).then(o=>{u.value=o})}),E(()=>{U(v.value),_("update:modelValue",!1)});const q=o=>{b.value=o,n.tabs&&_("update:activeTab",n.tabs[o])};return L(()=>b.value,o=>{u.value=!1,S(v.value).then(s=>{u.value=s})}),(o,s)=>(e(),a("div",{ref_key:"container",ref:T,id:"form"},[g(ee,{modelValue:B.value,"onUpdate:modelValue":s[0]||(s[0]=l=>B.value=l),text:r.onload?r.onload:null},null,8,["modelValue","text"]),g(R,{id:"tpb",modelValue:N.value,"onUpdate:modelValue":s[1]||(s[1]=l=>N.value=l)},null,8,["modelValue"]),r.tabs?(e(),a("div",ae,[(e(!0),a(m,null,c(r.tabs,(l,d)=>(e(),a("button",{key:d,onClick:i=>q(d),class:h([{active:d===b.value},"tab flex align-center justify-center"])},f(l),11,te))),128))])):p("",!0),g(W,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=l=>u.value=l)},{default:M(()=>[x("form",{action:"",onSubmit:O(l=>!0,["prevent"])},[(e(!0),a(m,null,c(y(v),(l,d)=>(e(),a("div",{key:d},[(e(!0),a(m,null,c(l,(i,w)=>(e(),a("div",{key:w,class:h(["row",i.classes])},[i.elements[0].hasOwnProperty("title")?(e(),a("span",le,f(i.elements[0].title),1)):p("",!0),(e(!0),a(m,null,c(i.elements,(t,A)=>(e(),a("div",{key:A,class:h(t.classes)},[x("span",oe,[G(f(t.label)+" ",1),t.required?(e(),a("span",ne,"*\u5FC5\u9808")):p("",!0)]),t.component?(e(),H(K(t.component),J({key:0,id:t.id},y($)(t),{modelValue:t.model,"onUpdate:modelValue":V=>t.model=V,class:["cfec column-1",{error:!y(C)(t).valid}]}),null,16,["id","modelValue","onUpdate:modelValue","class"])):p("",!0),(e(!0),a(m,null,c(y(C)(t).errors,(V,I)=>(e(),a("span",{key:I,class:"invalid block"},"*"+f(V),1))),128)),t.hint&&t.name!=="FileInput"?(e(),a("span",re,f(t.hint),1)):p("",!0)],2))),128))],2))),128)),F(o.$slots,"default")]))),128)),F(o.$slots,"actions")],40,se)]),_:3},8,["modelValue"])],512))}});export{me as _};
