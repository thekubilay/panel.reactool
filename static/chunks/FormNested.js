import{a as w,p as k,o as P,Q as _,t as q,b as e,v as a,f as g,H as x,I as d,J as m,y as h,K as c,A as p,w as z,x as N,C as E,e as H,R as M,z as y,g as Q,N as D,B as R}from"./vendor.js";import{u as J,a as K,D as L,b as O,c as G,d as W}from"./FormQuery.js";import{S as X}from"./Spinner.js";import{a as Y}from"../main.js";const Z={key:0,class:"tabs flex align-center"},ee=["onClick"],ae=["onSubmit"],te={key:0,class:"label title-label"},se={class:"label flex"},le={key:0,class:"required flex align-start"},oe={key:1,class:"hint"},de=w({props:{modelValue:Boolean,loading:Boolean,selectedId:Number,activeTab:String,form:{type:Array,default:[]},onload:{type:String,default:""},progress:Number,tabs:Array},emits:["update:modelValue","update:response","update:payload","update:activeTab","update:form"],setup(n,{emit:S}){const f=n;Y();const{setDynamics:C}=O(),{setClear:U}=G(),{reform:v,setProps:j}=J(),{isElementValid:B}=W(),F=k(),r=k(!1),b=k(0);P(()=>{v.value=f.form,C(f.form.filter((o,s)=>s===b.value)).then(o=>{r.value=o})}),_(()=>{U(v.value),S("update:modelValue",!1)});const $=o=>{b.value=o,f.tabs&&S("update:activeTab",f.tabs[o])};return q(()=>b.value,o=>{r.value=!1,C(v.value).then(s=>{r.value=s})}),(o,s)=>(e(),a("div",{ref_key:"container",ref:F,id:"form"},[g(X,{modelValue:n.loading,"onUpdate:modelValue":s[0]||(s[0]=l=>x(loading)?loading.value=l:null),text:n.onload?n.onload:null},null,8,["modelValue","text"]),g(K,{id:"tpb",modelValue:n.progress,"onUpdate:modelValue":s[1]||(s[1]=l=>x(progress)?progress.value=l:null)},null,8,["modelValue"]),n.tabs?(e(),a("div",Z,[(e(!0),a(d,null,m(n.tabs,(l,i)=>(e(),a("button",{key:i,onClick:u=>$(i),class:h([{active:i===b.value},"tab flex align-center justify-center"])},c(l),11,ee))),128))])):p("",!0),g(L,{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=l=>r.value=l)},{default:z(()=>[N("form",{action:"",onSubmit:R(l=>!0,["prevent"])},[(e(!0),a(d,null,m(y(v),(l,i)=>(e(),a("div",{key:i},[(e(!0),a(d,null,m(l,(u,A)=>(e(),a("div",{key:A,class:h(["row",u.classes])},[u.elements[0].hasOwnProperty("title")?(e(),a("span",te,c(u.elements[0].title),1)):p("",!0),(e(!0),a(d,null,m(u.elements,(t,I)=>(e(),a("div",{key:I,class:h(t.classes)},[N("span",se,[E(c(t.label)+" ",1),t.required?(e(),a("span",le,"*\u5FC5\u9808")):p("",!0)]),t.component?(e(),H(Q(t.component),M({key:0,id:t.id},y(j)(t),{modelValue:t.model,"onUpdate:modelValue":V=>t.model=V,class:["cfec column-1",{error:!y(B)(t).valid}]}),null,16,["id","modelValue","onUpdate:modelValue","class"])):p("",!0),(e(!0),a(d,null,m(y(B)(t).errors,(V,T)=>(e(),a("span",{key:T,class:"invalid block"},"*"+c(V),1))),128)),t.hint&&t.name!=="FileInput"?(e(),a("span",oe,c(t.hint),1)):p("",!0)],2))),128))],2))),128)),D(o.$slots,"default")]))),128)),D(o.$slots,"actions")],40,ae)]),_:3},8,["modelValue"])],512))}});export{de as _};
