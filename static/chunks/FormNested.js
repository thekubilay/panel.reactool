import{d as P,K as E,r as k,m as N,l as L,L as M,w as j,c as a,b as g,F as m,s as c,g as p,q as z,o as e,n as h,t as f,e as x,i as H,y as J,I as K,f as y,D as O,J as F,h as G}from"../main.js";import{u as Q,a as R,D as W,b as X,c as Y,d as Z}from"./FormQuery.js";import{S as ee}from"./Spinner.js";const ae={key:0,class:"tabs flex align-center"},te=["onClick"],se=["onSubmit"],le={key:0,class:"label title-label"},oe={class:"label flex"},ne={key:0,class:"required flex align-start"},re={key:1,class:"hint"},me=P({__name:"FormNested",props:{modelValue:Boolean,loading:Boolean,selectedId:Number,activeTab:String,form:{type:Array,default:[]},onload:{type:String,default:""},progress:Number,tabs:Array},emits:["update:modelValue","update:response","update:payload","update:activeTab","update:form"],setup(r,{emit:_}){const n=r;E();const{setDynamics:S}=X(),{setClear:U}=Y(),{reform:v,setProps:$}=Q(),{isElementValid:C}=Z(),I=k(),u=k(!1),b=k(0),B=N(()=>n.progress),D=N(()=>n.loading);L(()=>{v.value=n.form,S(n.form.filter((o,s)=>s===b.value)).then(o=>{u.value=o})}),M(()=>{U(v.value),_("update:modelValue",!1)});const T=o=>{b.value=o,n.tabs&&_("update:activeTab",n.tabs[o])};return j(()=>b.value,o=>{u.value=!1,S(v.value).then(s=>{u.value=s})}),(o,s)=>(e(),a("div",{ref_key:"container",ref:I,id:"form"},[g(ee,{modelValue:D.value,"onUpdate:modelValue":s[0]||(s[0]=l=>D.value=l),text:r.onload?r.onload:null},null,8,["modelValue","text"]),g(R,{id:"tpb",modelValue:B.value,"onUpdate:modelValue":s[1]||(s[1]=l=>B.value=l)},null,8,["modelValue"]),r.tabs?(e(),a("div",ae,[(e(!0),a(m,null,c(r.tabs,(l,d)=>(e(),a("button",{key:d,onClick:i=>T(d),class:h([{active:d===b.value},"tab flex align-center justify-center"])},f(l),11,te))),128))])):p("",!0),g(W,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=l=>u.value=l)},{default:z(()=>[x("form",{action:"",onSubmit:G(l=>!0,["prevent"])},[(e(!0),a(m,null,c(y(v),(l,d)=>(e(),a("div",{key:d},[(e(!0),a(m,null,c(l,(i,q)=>(e(),a("div",{key:q,class:h(["row",i.classes])},[i.elements[0].hasOwnProperty("title")?(e(),a("span",le,f(i.elements[0].title),1)):p("",!0),(e(!0),a(m,null,c(i.elements,(t,w)=>(e(),a("div",{key:w,class:h(t.classes)},[x("span",oe,[H(f(t.label)+" ",1),t.required?(e(),a("span",ne,"*\u5FC5\u9808")):p("",!0)]),t.component?(e(),J(O(t.component),K({key:0,id:t.id},y($)(t),{modelValue:t.model,"onUpdate:modelValue":V=>t.model=V,class:["cfec column-1",{error:!y(C)(t).valid}]}),null,16,["id","modelValue","onUpdate:modelValue","class"])):p("",!0),(e(!0),a(m,null,c(y(C)(t).errors,(V,A)=>(e(),a("span",{key:A,class:"invalid block"},"*"+f(V),1))),128)),t.hint&&t.name!=="FileInput"?(e(),a("span",re,f(t.hint),1)):p("",!0)],2))),128))],2))),128)),F(o.$slots,"default")]))),128)),F(o.$slots,"actions")],40,se)]),_:3},8,["modelValue"])],512))}});export{me as _};
