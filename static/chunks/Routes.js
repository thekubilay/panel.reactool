import{D as V}from"./vuedraggable.umd.js";import{d as w,A as B,k as E,u as $,l as y,E as R,c as A,g as u,w as r,h as s,b as l,p as d,P as U,o as N,s as S,t as i}from"../main.js";import{_ as j}from"./Dialog.js";import{_ as q}from"./FormQuery.js";import{_ as I}from"./DialogDelete.js";import{_ as P}from"./BarTool.js";import{u as H,a as L}from"./useFormRequestBuilder.js";import{f as T}from"./FormRoute.js";import"./_commonjsHelpers.js";import"./Spinner.js";import"./plugin-vue_export-helper.js";import"./rules.js";const z={id:"admin-app-routes",class:"admin-board"},G={class:"part-wrap"},J={class:"spreadsheet-wrapper overflow-x"},K=U('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8</div><div class="sheet-cell value flex align-center">\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30D1\u30CD\u30EB\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell value flex align-center">URL\u30D1\u30B9</div></div></div>',1),M=["onClick"],O=s("div",{class:"sheet-cell handle flex align-center handle grab"},[s("i",{class:"pi pi-bars"})],-1),Q={class:"sheet-cell num flex align-center"},W={class:"text block"},X={class:"sheet-cell sheet-cell value flex align-center"},Y={class:"text block"},Z={class:"sheet-cell value flex align-center"},ee={class:"text block"},se={class:"sheet-cell value flex align-center"},te={class:"text block"},le={class:"sheet-cell value flex align-center"},ae={class:"text block"},oe={class:"sheet-cell value flex align-center"},ne={class:"text block"},ue={class:"button-wrapper flex justify-end"},Fe=w({__name:"Routes",setup(ie){const{get:_}=B();E();const{payload:h,content:v,user:re,companies:de,routes:p}=$(),{d:o,dr:a,data:m,useToggle:f}=H(),{submit:x,remove:g,submitRowReorder:b}=L(),c=y(!1);R({id:null,order_id:null,component:null,name:null,panel_name:null,path:null,title:null});function C(){c.value=!1,f({method:"post",endpoints:["routes","routes"],state:"routes"})}function k(n){c.value=!0,f({method:"patch",endpoints:["routes/"+n.id,"routes"],state:"routes"},n)}function D(){var n;v.value=!0,h.value={method:"get",endpoints:["routes","routes"],state:"routes"},g("routes/"+((n=m.value)==null?void 0:n.id)).then(()=>{_("routes","routes").then(()=>{a.value=!1,o.value=!1,v.value=!1})})}return(n,t)=>(N(),A("div",z,[u(P,{class:"justify-space-between"},{default:r(()=>[s("div",G,[u(l(S),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u30EB\u30FC\u30C8",onClick:t[0]||(t[0]=e=>C())})])]),_:1}),s("div",J,[K,u(l(V),{tag:"div",onEnd:t[1]||(t[1]=e=>l(b)({value:l(p)},{method:"post",endpoints:["routes","routes"],state:"routes"})),list:l(p),class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:r(({element:e,index:F})=>[s("div",{onClick:ce=>k(e),class:"sheet-row flex align-center list-group-item relative pointer"},[O,s("div",Q,[s("span",W,i(e.order_id?e.order_id:F+1),1)]),s("div",X,[s("span",Y,i(e.component),1)]),s("div",Z,[s("span",ee,i(e.name),1)]),s("div",se,[s("span",te,i(e.panel_name),1)]),s("div",le,[s("span",ae,i(e.title),1)]),s("div",oe,[s("span",ne,i(e.path),1)])],8,M)]),_:1},8,["list"])]),u(j,{modelValue:l(o),"onUpdate:modelValue":t[7]||(t[7]=e=>d(o)?o.value=e:null),title:"\u4F1A\u793E\u30D5\u30A9\u30FC\u30E0"},{default:r(()=>[u(q,{modelValue:l(o),"onUpdate:modelValue":t[2]||(t[2]=e=>d(o)?o.value=e:null),dr:l(a),"onUpdate:dr":t[3]||(t[3]=e=>d(a)?a.value=e:null),"close-after":"",form:l(T),data:l(m),remove:c.value,query:{},submit:l(x)},null,8,["modelValue","dr","form","data","remove","submit"]),u(I,{modelValue:l(a),"onUpdate:modelValue":t[6]||(t[6]=e=>d(a)?a.value=e:null)},{default:r(()=>[s("div",ue,[s("button",{onClick:t[4]||(t[4]=e=>a.value=!1),class:"cancel"},"\u3044\u3044\u3048"),s("button",{onClick:t[5]||(t[5]=e=>D()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Fe as default};
