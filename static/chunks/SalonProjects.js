import{u as L}from"./FormProject.js";import{u as Q}from"../main.js";import{u as M,a as W,S as X,_ as Y}from"./useFormRequestBuilder.js";import{D as Z}from"./vuedraggable.umd.js";import{_ as ee}from"./FormQuery.js";import{_ as U}from"./Icon.js";import{_ as le}from"./ContextImagesThumbnailContainer.js";import{a as ae,p as d,t as k,v as y,f as g,z as t,H as j,x as s,w,a3 as se,b as c,K as B,e as V,A}from"./vendor.js";import"./rules.js";import"./plugin-vue_export-helper.js";const te={id:"salon-projects",class:"panel-board"},oe={class:"spreadsheet-wrapper overflow-x"},ie=se('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">ID</div><div class="sheet-cell sheet-cell-long value flex align-center">\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u540D</div><div class="sheet-cell value flex align-center">\u30A2\u30AF\u30C6\u30A3\u30D6</div><div class="sheet-cell value flex align-center">PIN</div><div class="sheet-cell value flex align-center">\u30ED\u30B4</div></div></div>',1),ne=["onClick"],ue=s("div",{class:"sheet-cell handle flex align-center justify-center grab"},[s("i",{class:"pi pi-bars"})],-1),ce={class:"sheet-cell num flex align-center"},re={class:"sheet-cell value flex align-center"},ve={class:"text block"},de={class:"sheet-cell sheet-cell-long value flex align-center long-cell"},pe={class:"text block"},_e={class:"sheet-cell value flex align-center"},ge={class:"text block"},me={key:0,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#2ecc71"}},he={key:1,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#e74c3c"}},fe={class:"sheet-cell value flex align-center"},xe={class:"context block"},be={class:"sheet-cell value flex align-center"},ke={class:"context block"},Se=ae({setup(ye){const{submit:m,submitRowReorder:z,remove:je}=M(),{d:u,images:i,data:e,useToggle:H}=W(),{payload:O,content:h,progress:G,GET_SALON_PROJECTS:f}=Q(),p=d(!1),o=d(0),x=d("pin_input"),J=d(["\u5185\u5BB9","\u8A2D\u5B9A","\u5730\u56F3\u5370","\u30ED\u30B4\u753B\u50CF"]),r=d({});function K(){p.value=!0,O.value={method:"patch",endpoints:["projects/"+e.value.id,"projects"],state:"projects"},o.value===1?m({pin:null},null,"object").then(()=>{p.value=!1,i.value=[]}):o.value===2&&m({logo:null},null,"object").then(()=>{p.value=!1,i.value=[]})}return k(()=>f.value,n=>{n.forEach(a=>{e.value&&e.value.id===a.id&&(e.value=a,o.value===1?i.value=a.pin?[{image:a.pin}]:[]:o.value===2&&(i.value=a.logo?[{image:a.logo}]:[]))})}),k(()=>u.value,n=>{n||(o.value=0)}),k(()=>o.value,n=>{var a,v,l,_,b,C,D,E,F,I,T,S,N,R,$,q,P;n===0?(i.value=[],r.value={id:null,order_id:null,name:(a=e.value)==null?void 0:a.name,context:(v=e.value)==null?void 0:v.context,address:(l=e.value)==null?void 0:l.address,archive:(_=e.value)==null?void 0:_.archive,token_on:(b=e.value)==null?void 0:b.token_on,salon_view:(C=e.value)==null?void 0:C.salon_view,legacy:(D=e.value)==null?void 0:D.legacy}):n===1?(i.value=[],r.value={salon:null,salon_view:!0,archive:!1}):n===2?(r.value={logo:null,logo_width:null,logo_height:null,logo_place:3,archive:(E=e.value)==null?void 0:E.archive,token_on:(F=e.value)==null?void 0:F.token_on,salon_view:(I=e.value)==null?void 0:I.salon_view,legacy:(T=e.value)==null?void 0:T.legacy},i.value=e.value.pin?[{image:e.value.pin}]:[],x.value="pin_input"):n==3&&(r.value={pin:null,pin_width:(S=e.value)==null?void 0:S.pin_width,pin_height:(N=e.value)==null?void 0:N.pin_height,archive:(R=e.value)==null?void 0:R.archive,token_on:($=e.value)==null?void 0:$.token_on,salon_view:(q=e.value)==null?void 0:q.salon_view,legacy:(P=e.value)==null?void 0:P.legacy},i.value=e.value.logo?[{image:e.value.logo}]:[],x.value="logo_input")}),(n,a)=>{var v;return c(),y("div",te,[g(X,{modelValue:t(h),"onUpdate:modelValue":a[0]||(a[0]=l=>j(h)?h.value=l:null)},null,8,["modelValue"]),s("div",oe,[ie,g(t(Z),{tag:"div",onEnd:a[1]||(a[1]=l=>t(z)({value:t(f)},{method:"post",endpoints:["projects","projects"],state:"projects"})),list:t(f),class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:w(({element:l,index:_})=>[s("div",{onClick:b=>t(H)({method:"patch",endpoints:["projects/"+l.id,"projects"],state:"projects"},l),class:"sheet-row flex align-center list-group-item relative pointer"},[ue,s("div",ce,B(l.order_id?l.order_id:_+1),1),s("div",re,[s("span",ve,B(l.id),1)]),s("div",de,[s("span",pe,B(l.name),1)]),s("div",_e,[s("span",ge,[l.archive?(c(),y("i",he)):(c(),y("i",me))])]),s("div",fe,[s("span",xe,[l.pin?(c(),V(U,{key:0,svg:"image"})):A("",!0)])]),s("div",be,[s("span",ke,[l.logo?(c(),V(U,{key:0,svg:"image"})):A("",!0)])])],8,ne)]),_:1},8,["list"])]),g(Y,{modelValue:t(u),"onUpdate:modelValue":a[4]||(a[4]=l=>j(u)?u.value=l:null),title:(v=t(e))==null?void 0:v.name.replaceAll("<br>","")},{default:w(()=>[g(ee,{modelValue:t(u),"onUpdate:modelValue":a[2]||(a[2]=l=>j(u)?u.value=l:null),activeTab:o.value,"onUpdate:activeTab":a[3]||(a[3]=l=>o.value=l),topProgress:"",tabs:J.value,progress:t(G),form:t(L),data:t(e),loading:p.value,query:r.value,submit:t(m)},{default:w(()=>[o.value===2||o.value===3?(c(),V(le,{key:0,containerId:x.value,images:t(i),remove:K},null,8,["containerId","images"])):A("",!0)]),_:1},8,["modelValue","activeTab","tabs","progress","form","data","loading","query","submit"])]),_:1},8,["modelValue","title"])])}}});export{Se as default};
