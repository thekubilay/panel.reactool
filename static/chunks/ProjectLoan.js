import{D as U}from"./vuedraggable.umd.js";import{a as H,p as c,t as M,v as N,f as u,z as s,H as m,w as h,x as a,a4 as P,b as L,S as D,K as g}from"./vendor.js";import{s as O}from"./menu.esm.js";import{u as X,a as z,_ as K}from"./useFormRequestBuilder.js";import{_ as Q}from"./FormQuery.js";import{_ as G}from"./DialogDelete.js";import{S as J}from"./Spinner.js";import{_ as W}from"./BarTool.js";import{A as Y,u as Z}from"../main.js";import{u as ee}from"./useRightClickHandler.js";import"./overlayeventbus.esm.js";import"./plugin-vue_export-helper.js";const q=[[{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"name",type:"text",model:null,label:"\u9280\u884C\u540D",hint:null,placeholder:"\u4F4F\u53CB\u9280\u884C",required:!1,id:"name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"rate",type:"text",model:null,label:"\u91D1\u5229",hint:null,placeholder:"0.345",required:!1,id:"rate_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]}]],le=[[{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"price",type:"text",model:null,label:"\u7269\u4EF6\u4FA1\u683C",hint:"\u4E07\u5186\u3068\u3057\u3066\u3054\u5165\u529B",placeholder:"4000",required:!1,id:"interest_rate_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"interest_rate",type:"text",model:null,label:"\u91D1\u5229",hint:null,placeholder:"140000",required:!1,id:"interest_rate_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"interest_rate_max",type:"text",model:null,label:"\u91D1\u5229MAX",hint:null,placeholder:"12300",required:!1,id:"interest_rate_max_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]},{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"deposit",type:"text",model:null,label:"\u982D\u91D1",hint:null,placeholder:"140000",required:!1,id:"deposit_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"deposit_max",type:"text",model:null,label:"\u982D\u91D1MAX",hint:null,placeholder:"12300",required:!1,id:"deposit_max_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]}]];const te={id:"project_loan",class:"relative panel-board"},se={class:"part-wrap"},ae={class:"spreadsheet-wrapper overflow-x"},ne=P('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell sheet-cell-long flex align-center">\u9280\u884C</div><div class="sheet-cell value flex align-center">\u91D1\u5229</div></div></div>',1),ue=["onClick","onContextmenu"],oe=a("div",{class:"sheet-cell handle flex align-center handle grab"},[a("i",{class:"pi pi-bars"})],-1),ie={class:"sheet-cell num flex align-center"},re={class:"text block"},de={class:"sheet-cell sheet-cell-long flex align-center"},pe={class:"text block"},ce={class:"sheet-cell value flex align-center"},me={class:"text block"},fe={class:"button-wrapper flex justify-end"},Be=H({setup(_e){var k;const{get:x,save:w}=Y(),{submit:V,submitRowReorder:F,remove:j}=X(),{d:i,dr:o,data:d,useToggle:f}=z(),{rcm:B,rcmOpened:ve,isRCOn:$}=ee(d),{payload:be,content:r,progress:A,project:n}=Z(),_=c(!1),y=c(!1),p=c(((k=n.value)==null?void 0:k.building.bank_types)||[]),v=c([]);function I(){var l;v.value=q,_.value=!1,f({method:"post",endpoints:["app/bank_types","project_details/"+((l=n.value)==null?void 0:l.id)],state:"project"})}function T(l){var e;v.value=q,_.value=!0,f({method:"patch",endpoints:["app/bank_types/"+l.id,"project_details/"+((e=n.value)==null?void 0:e.id)],state:"project"},l)}function R(l){var e;v.value=le,_.value=!1,f({method:"patch",endpoints:["app/loan_settings/"+l.id,"project_details/"+((e=n.value)==null?void 0:e.id)],state:"project"},l)}function S(){var l;y.value=!0,j("app/bank_types/"+((l=d.value)==null?void 0:l.id)).then(()=>{var e;o.value=!1,x("project_details/"+((e=n.value)==null?void 0:e.id),"project").then(()=>{i.value=!1,y.value=!1})})}const E=c([{label:"\u65B0\u898F\u30EB\u30FC\u30C8",command:()=>{var l;f({method:"post",endpoints:["app/bank_types","project_details/"+((l=n.value)==null?void 0:l.id)],state:"project"})}},{label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{var e,t;r.value=!0;const l={order_id:p.value?p.value.length+1:1,building:((t=(e=n.value)==null?void 0:e.building)==null?void 0:t.id)||null,name:d.value.name,rate:d.value.rate};w("app/bank_types",l).then(()=>{var b;x("project_details/"+((b=n.value)==null?void 0:b.id),"project").then(()=>{r.value=!1})})}},{label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{var l;r.value=!0,j("app/bank_types/"+((l=d.value)==null?void 0:l.id)).then(()=>{var e;x("project_details/"+((e=n.value)==null?void 0:e.id),"project").then(()=>{r.value=!1})})}}]);return M(()=>n.value,l=>{p.value=(l==null?void 0:l.building.bank_types)||[]}),(l,e)=>(L(),N("div",te,[u(J,{modelValue:s(r),"onUpdate:modelValue":e[0]||(e[0]=t=>m(r)?r.value=t:null)},null,8,["modelValue"]),u(W,{class:"justify-space-between"},{default:h(()=>[a("div",se,[u(s(D),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u91D1\u5229\u3092\u8FFD\u52A0",onClick:e[1]||(e[1]=t=>I())}),u(s(D),{type:"button",class:"submit-button icon-button",icon:"pi pi-cog","icon-pos":"left",onClick:e[2]||(e[2]=t=>R(s(n).loan_settings))})])]),_:1}),a("div",ae,[ne,u(s(U),{tag:"div",onEnd:e[3]||(e[3]=t=>s(F)({value:p.value},{method:"post",endpoints:["app/bank_types","project_details/"+s(n).id],state:"project"})),list:p.value,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:h(({element:t,index:b})=>[a("div",{onClick:C=>T(t),onContextmenu:C=>s($)(C,t),"aria-haspopup":"true","aria-controls":"plan_rc_menu",class:"sheet-row flex align-center list-group-item relative pointer"},[u(s(O),{id:"rc_menu",ref_key:"rcm",ref:B,class:"rc has-final-action",model:E.value,popup:!0},null,8,["model"]),oe,a("div",ie,[a("span",re,g(b+1),1)]),a("div",de,[a("span",pe,g(t.name),1)]),a("div",ce,[a("span",me,g(t.rate),1)])],40,ue)]),_:1},8,["list"])]),u(K,{modelValue:s(i),"onUpdate:modelValue":e[9]||(e[9]=t=>m(i)?i.value=t:null),title:"\u91D1\u5229\u30D5\u30A9\u30FC\u30E0"},{default:h(()=>[u(Q,{modelValue:s(i),"onUpdate:modelValue":e[4]||(e[4]=t=>m(i)?i.value=t:null),dr:s(o),"onUpdate:dr":e[5]||(e[5]=t=>m(o)?o.value=t:null),"close-after":"",topProgress:"",progress:s(A),form:v.value,data:s(d),remove:_.value,query:{building:s(n).building.id},submit:s(V)},null,8,["modelValue","dr","progress","form","data","remove","query","submit"]),u(G,{modelValue:s(o),"onUpdate:modelValue":e[8]||(e[8]=t=>m(o)?o.value=t:null)},{default:h(()=>[a("div",fe,[a("button",{onClick:e[6]||(e[6]=t=>o.value=!1),class:"cancel"},"\u3044\u3044\u3048"),a("button",{onClick:e[7]||(e[7]=t=>S()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Be as default};
