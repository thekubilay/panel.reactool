import{D as S}from"./vuedraggable.umd.js";import{d as M,j as N,k as H,A as L,u as O,r as f,l as z,w as G,c as B,b as a,f as u,z as d,q as c,e as s,a2 as J,o as j,M as C,t as h,g as K}from"../main.js";import{s as Q}from"./menu.esm.js";import{S as W}from"./Spinner.js";import{_ as X}from"./BarTool.js";import{_ as Y}from"./FormQuery.js";import{_ as Z}from"./Dialog.js";import{_ as ee}from"./DialogDelete.js";import{_ as le}from"./ContextImagesThumbnailContainer.js";import{_ as te}from"./Icon.js";import{u as ue,a as se}from"./useFormRequestBuilder.js";import{u as ae}from"./useRightClickHandler.js";import"./_commonjsHelpers.js";import"./portal.esm.js";import"./plugin-vue_export-helper.js";const oe=[[{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"title",type:"text",model:null,label:"\u30BF\u30A4\u30C8\u30EB",hint:null,placeholder:"\u30EA\u30D3\u30F3\u30B0\u30EB\u30FC\u30E0",required:!0,id:"title_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"sub_title",type:"text",model:null,label:"\u3000\u30B5\u30D6\u30BF\u30A4\u30C8\u30EB",hint:null,placeholder:"\u3007\u3007\u30B3\u30FC\u30CA\u30FC",required:!1,id:"sub_title_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]},{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"url",type:"text",model:null,label:"URL",hint:null,placeholder:"https://marumaru.com/vendor/vr_url",required:!0,id:"url_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"FileInput",db_column_name:"image",type:"text",model:null,label:"\u9593\u53D6\u308A\u30BF\u30A4\u30D7\u753B\u50CF",hint:".jpeg, .png \u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u3059",required:!1,id:"vendor_image_input",preview_text:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306E\u305F\u3081\u3001\u30AF\u30EA\u30C3\u30AF\u3084\u753B\u50CF\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",limit:"1MB\u4EE5\u4E0B",accept:"image/*",rules:[],rule:null,disabled:!1,props:["placeholder","required","disabled","accept","hint","model","image_path","preview_text","limit","rule"],classes:["flex-column","column-1"]}]}]];const ne={id:"project_room_vr_vendors",class:"panel-board relative"},ie={class:"part-wrap"},re={class:"part-wrap part-end"},de={class:"spreadsheet-wrapper overflow-y"},ce=J('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell sheet-value-cell value flex align-center">\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell sheet-value-cell value flex align-center">\u30B5\u30D6\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell sheet-value-cell flex align-center">URL</div><div class="sheet-cell sheet-value-cell flex align-center">\u753B\u50CF</div></div></div>',1),pe=["onClick"],me=s("div",{class:"sheet-cell handle flex align-center justify-center grab"},[s("i",{class:"pi pi-bars"})],-1),ve={class:"sheet-cell num flex align-center"},_e={class:"sheet-cell sheet-value-cell flex align-center"},fe={class:"sheet-cell sheet-value-cell flex align-center"},he={class:"sheet-cell sheet-value-cell flex align-center"},ge={class:"sheet-cell sheet-value-cell flex align-center"},be={key:0,class:"text flex"},Ce={class:"button-wrapper flex justify-end"},He=M({__name:"ProjectRoomVrVendors",setup(xe){const x=N(),p=H(),{get:V,save:ye}=L(),{submit:y,submitRowReorder:A,remove:D}=ue(),{d:i,dr:o,data:m,images:v,useToggle:F}=se(),{rcm:E,rcmOpened:Fe,isRCOn:Be}=ae(m),{payload:w,content:g,progress:je,project:n}=O(),_=f([]),b=f(!1),r=f(!1),R=f([{icon:"pi pi-plus",label:"\u65B0\u898F\u753B\u50CF",command:()=>{}},{icon:"pi pi-copy",label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{}},{icon:"pi pi-trash",label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{}}]);z(()=>{var t;_.value=((t=n.value)==null?void 0:t.room_vr_vendors)||[]});function k(){var t;b.value=!1,v.value=[],F({method:"post",endpoints:["app/room_vr_vendors","project_details/"+((t=n.value)==null?void 0:t.id)],state:"project"})}function $(t){var e;b.value=!0,v.value=t.image?[{image:t.image}]:[],F({method:"patch",endpoints:["app/room_vr_vendors/"+t.id,"project_details/"+((e=n.value)==null?void 0:e.id)],state:"project"},t)}function q(t){var e;r.value=!0,w.value={method:"patch",endpoints:["app/room_vr_vendors/"+m.value.id,"project_details/"+((e=n.value)==null?void 0:e.id)],state:"project"},y({image:null},null,"object").then(()=>{r.value=!1,v.value=[]})}function I(){var t;r.value=!0,D("app/room_vr_vendors/"+((t=m.value)==null?void 0:t.id)).then(()=>{var e;o.value=!1,V("project_details/"+((e=n.value)==null?void 0:e.id),"project").then(()=>{i.value=!1,r.value=!1})})}const U=()=>{x.push({name:"ProjectRoomVrFloors",params:{cid:p.params.cid,dynid:p.params.dynid}})},P=()=>{x.push({name:"ProjectRoomVrTypes",params:{cid:p.params.cid,dynid:p.params.dynid}})};return G(()=>{var t;return(t=n.value)==null?void 0:t.room_vr_vendors},t=>{_.value=t||[]}),(t,e)=>(j(),B("div",ne,[a(W,{modelValue:u(g),"onUpdate:modelValue":e[0]||(e[0]=l=>d(g)?g.value=l:null)},null,8,["modelValue"]),a(X,{class:"justify-space-between"},{default:c(()=>[s("div",ie,[a(u(C),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u30D9\u30F3\u30C0\u30FCVR\u3092\u8FFD\u52A0",onClick:e[1]||(e[1]=l=>k())})]),s("div",re,[a(u(C),{style:{"margin-left":"5px"},onClick:e[2]||(e[2]=l=>U()),type:"button",class:"tool-button",label:"VR\u4E00\u89A7\u3078"}),a(u(C),{style:{"margin-left":"5px"},onClick:e[3]||(e[3]=l=>P()),type:"button",class:"tool-button",label:"\u9593\u53D6\u308A\u30BF\u30A4\u30D7\u4E00\u89A7\u3078"})])]),_:1}),s("div",de,[ce,a(u(S),{tag:"div",onEnd:e[4]||(e[4]=l=>u(A)({value:_.value},{method:"post",endpoints:["app/room_vr_vendors","project_details/"+u(n).id],state:"project"})),list:_.value,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:c(({element:l,index:T})=>[s("div",{onClick:Ve=>$(l),class:"sheet-row flex align-center list-group-item relative pointer"},[a(u(Q),{id:"rc_menu",ref_key:"rcm",ref:E,class:"rc has-final-action",model:R.value,popup:!0},null,8,["model"]),me,s("div",ve,h(T+1),1),s("div",_e,h(l.title),1),s("div",fe,h(l.sub_title),1),s("div",he,h(l.url),1),s("div",ge,[l.image?(j(),B("span",be,[a(te,{style:{"margin-right":"5px"},svg:"image"})])):K("",!0)])],8,pe)]),_:1},8,["list"])]),a(Z,{modelValue:u(i),"onUpdate:modelValue":e[10]||(e[10]=l=>d(i)?i.value=l:null),title:"\u30D9\u30F3\u30C0\u30FCVR\u30D5\u30A9\u30FC\u30E0"},{default:c(()=>[a(Y,{modelValue:u(i),"onUpdate:modelValue":e[5]||(e[5]=l=>d(i)?i.value=l:null),dr:u(o),"onUpdate:dr":e[6]||(e[6]=l=>d(o)?o.value=l:null),"close-after":"",form:u(oe),data:u(m),remove:b.value,loading:r.value,query:{project:u(n).id},submit:u(y)},{default:c(()=>[a(le,{containerId:"plan_type_image_input",images:u(v),remove:q},null,8,["images"])]),_:1},8,["modelValue","dr","form","data","remove","loading","query","submit"]),a(ee,{modelValue:u(o),"onUpdate:modelValue":e[9]||(e[9]=l=>d(o)?o.value=l:null)},{default:c(()=>[s("div",Ce,[s("button",{onClick:e[7]||(e[7]=l=>o.value=!1),class:"cancel"},"\u3044\u3044\u3048"),s("button",{onClick:e[8]||(e[8]=l=>I()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{He as default};
