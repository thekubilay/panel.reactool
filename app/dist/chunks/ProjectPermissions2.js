import{_ as k}from"./Dialog.js";import{_ as y}from"./FormQuery.js";import{S as C}from"./Spinner.js";import{f as F}from"./FormProjectPermission.js";import{a as w,u as A}from"./useFormRequestBuilder.js";import{A as B,u as D}from"../main.js";import{u as S}from"./useUtils.js";import{a as U,C as m,N as E,q as i,f as p,t as r,D as _,x as s,F as P,E as R,w as q,W as N,b as n,A as v}from"./vendor.js";import"./plugin-vue_export-helper.js";import"./rules.js";const $={id:"project_permissions",class:"relative panel-board"},z={class:"spreadsheet-wrapper overflow-x"},H=N('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30B3\u30FC\u30C9\u540D</div><div class="sheet-cell value flex align-center">\u30CD\u30FC\u30E0</div></div></div>',1),I={class:"sb-container ss-container"},L=["onClick"],Q={class:"sheet-cell num flex align-center"},T={class:"text block"},W={class:"sheet-cell value flex align-center"},G={class:"text block"},J={class:"sheet-cell value flex align-center"},K={class:"text block"},M={class:"sheet-cell value flex align-center"},O={class:"context block"},X={key:0,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#2ecc71"}},Y={key:1,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#e74c3c"}},fe=U({setup(Z){var h;B();const{submit:g,submitRowReorder:ee,remove:se}=w(),{d:l,dr:te,data:j,useToggle:b}=A(),{findAndUpdateFormElement:c}=S(),{payload:oe,content:u,progress:le,project:d}=D(),a=m([]);m(!1);const f=m(((h=d.value)==null?void 0:h.permissions)||[]);function V(o){var t;a.value=c(F,"code_name","disabled",!0),a.value=c(a.value,"name","disabled",!0),a.value=c(a.value,"description","disabled",!0),b({method:"patch",endpoints:["app/permissions/"+o.id,"project_details/"+((t=d.value)==null?void 0:t.id)],state:"project"},o)}return E(()=>d.value,o=>{f.value=(o==null?void 0:o.permissions)||[]}),(o,t)=>(n(),i("div",$,[p(C,{modelValue:r(u),"onUpdate:modelValue":t[0]||(t[0]=e=>_(u)?u.value=e:null)},null,8,["modelValue"]),s("div",z,[H,s("div",I,[(n(!0),i(P,null,R(f.value,(e,x)=>(n(),i("div",{onClick:ae=>V(e),key:x,class:"sheet-row flex align-center list-group-item relative pointer"},[s("div",Q,[s("span",T,v(x+1),1)]),s("div",W,[s("span",G,v(e.code_name),1)]),s("div",J,[s("span",K,v(e.name),1)]),s("div",M,[s("span",O,[e.active?(n(),i("i",X)):(n(),i("i",Y))])])],8,L))),128))])]),p(k,{modelValue:r(l),"onUpdate:modelValue":t[2]||(t[2]=e=>_(l)?l.value=e:null),title:"\u6A29\u9650\u30D5\u30A9\u30FC\u30E0"},{default:q(()=>[p(y,{modelValue:r(l),"onUpdate:modelValue":t[1]||(t[1]=e=>_(l)?l.value=e:null),"close-after":"",form:a.value,data:r(j),query:{},submit:r(g)},null,8,["modelValue","form","data","submit"])]),_:1},8,["modelValue"])]))}});export{fe as default};
