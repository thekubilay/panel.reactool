import{d as $,D as C,j as I,b as v,k as n,w as _,e as l,M as U,N as R,u as a,l as r,a3 as N,J as S,I as L,a as b,U as M,t as d}from"./vendor.js";import H from"./dropdown.esm.js";import{a as J,u as P,_ as Q}from"./useFormRequestBuilder.js";import{_ as z}from"./DialogDelete.js";import{_ as G}from"./FormQuery.js";import{i as y,a as K}from"./rules.js";import{f as O}from"./FormUserUpdate.js";import{A as W,u as X}from"../main.js";import{_ as Y}from"./BarTool.js";import"./overlayeventbus.esm.js";import"./virtualscroller.esm.js";const B=[[{classes:["flex justify-space-between"],elements:[{component:null,name:"Dropdown",db_column_name:"is_remove_scheduled",type:"text",model:!1,label:"\u524A\u9664\u30B9\u30B1\u30B8\u30E5\u30FC\u30EB",hint:"\u4F7F\u7528\u671F\u9593\u7D42\u308F\u308B\u3068\u3001\u524A\u9664\u3057\u305F\u3044\u5834\u5408\u300C\u306F\u3044\u300D\u3092\u9078\u629E",required:!1,rules:[],id:"remove_scheduled_input",disabled:!1,options:[{name:"\u306F\u3044",value:!0},{name:"\u3044\u3044\u3048",value:!1}],optionLabel:"name",optionValue:"value",placeholder:"\u9078\u629E",appendTo:"body",props:["placeholder","required","disabled","options","optionLabel","optionValue","appendTo"],classes:["flex-column","column-2-space","relative"]},{component:null,name:"CalendarInput",db_column_name:"remove_date",type:"text",model:new Date,label:"\u4F7F\u7528\u7D42\u4E86\u65E5",hint:"\u524A\u9664\u30B9\u30B1\u30B8\u30E5\u30FC\u30EB\u306F\u300C\u306F\u3044\u300D\u306E\u5834\u5408\u6642\u904B\u7528\u3055\u308C\u308B",placeholder:"",required:!1,id:"remove_date_input",rules:[],dateFormat:"yy\u5E74mm\u6708dd\u65E5",appendTo:"self",disabled:!1,props:["placeholder","required","disabled","dateFormat","appendTo"],classes:["flex-column","column-2-space"]}]},{classes:["flex justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"last_name",type:"text",model:null,label:"\u59D3",hint:null,placeholder:"\u7530\u4E2D",required:!0,id:"last_name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]},{component:null,name:"InputText",db_column_name:"first_name",type:"text",model:null,label:"\u540D",hint:null,placeholder:"\u592A\u90CE",required:!0,id:"first_name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]},{classes:["flex justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"username",type:"text",model:null,label:"\u30E6\u30FC\u30B6\u30FC\u540D",hint:"*\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u305F\u3081\u306B\u4F7F\u308F\u308C\u307E\u3059",placeholder:"tanaka",required:!0,id:"username_input",rules:[y],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-2-space"]}]},{classes:["flex"],elements:[{component:null,name:"InputText",db_column_name:"email",type:"text",model:null,label:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",hint:null,placeholder:"tanaka.tarou@reactool.jp",required:!0,id:"email_input",rules:[K],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"InputText",db_column_name:"password",type:"text",model:null,label:"\u30D1\u30B9\u30EF\u30FC\u30C9",hint:null,placeholder:"",required:!0,id:"password_input",rules:[y],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]}]],Z={id:"users",class:"admin-board"},ee={class:"part-wrap"},le={class:"part-wrap part-end"},se={class:"spreadsheet-wrapper overflow-x"},ue=N('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell num flex align-center">#</div><div class="sheet-cell value flex align-center">\u30E6\u30FC\u30B6\u30FC\u540D</div><div class="sheet-cell value flex align-center">\u59D3</div><div class="sheet-cell value flex align-center">\u540D</div><div class="sheet-cell sheet-cell-long value flex align-center">\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9</div></div></div>',1),ae={class:"sb-container ss-container"},te=["onClick"],oe={class:"sheet-cell num flex align-center"},ne={class:"text block"},re={class:"sheet-cell value flex align-center"},de={class:"text block"},ie={class:"sheet-cell value flex align-center"},ce={class:"text block"},pe={class:"sheet-cell value flex align-center"},me={class:"text block"},fe={class:"sheet-cell sheet-cell-long value flex align-center"},ve={class:"text block"},_e={class:"button-wrapper flex justify-end"},Ae=$({setup(be){const{get:h}=W(),i=S(),E=L(),{store:he,progress:xe,user:Fe,companies:g,company:w,users:D,content:c}=X(),{d:o,dr:t,data:x,useToggle:F}=J(),{submit:j,remove:q}=P(),p=C(B),m=C(!1),f=I({set(u){c.value=!0,E.push({params:{cid:u}}),h("companies/"+u,"company").then(()=>{c.value=!1})},get(){var u;return(u=w.value)==null?void 0:u.id}});function V(){m.value=!1,p.value=B,p.value[0][0].elements[1].model=new Date,F({method:"post",endpoints:["users","companies/"+i.params.cid],state:"company"})}function k(u){m.value=!0,p.value=O,F({method:"patch",endpoints:["users/"+u.id,"companies/"+i.params.cid],state:"company"},u)}function T(){var u;c.value=!0,q("users/"+((u=x.value)==null?void 0:u.id)).then(()=>{h("companies/"+i.params.cid,"company").then(()=>{t.value=!1,o.value=!1,c.value=!1})})}return(u,s)=>(b(),v("div",Z,[n(Y,{class:"justify-space-between"},{default:_(()=>[l("div",ee,[n(a(M),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u30E6\u30FC\u30B6\u30FC",onClick:s[0]||(s[0]=e=>V())})]),l("div",le,[n(a(H),{style:{width:"140px"},class:"dropdown",modelValue:a(f),"onUpdate:modelValue":s[1]||(s[1]=e=>r(f)?f.value=e:null),"option-label":"name","option-value":"id",options:a(g)},null,8,["modelValue","options"])])]),_:1}),l("div",se,[ue,l("div",ae,[(b(!0),v(U,null,R(a(D),(e,A)=>(b(),v("div",{key:e.id,onClick:Ce=>k(e),class:"sheet-row flex align-center relative pointer"},[l("div",oe,[l("span",ne,d(A+1),1)]),l("div",re,[l("span",de,d(e.username),1)]),l("div",ie,[l("span",ce,d(e.last_name),1)]),l("div",pe,[l("span",me,d(e.first_name),1)]),l("div",fe,[l("span",ve,d(e.email),1)])],8,te))),128))])]),n(Q,{modelValue:a(o),"onUpdate:modelValue":s[7]||(s[7]=e=>r(o)?o.value=e:null),title:"\u30E6\u30FC\u30B6\u30FC\u30D5\u30A9\u30FC\u30E0"},{default:_(()=>[n(G,{modelValue:a(o),"onUpdate:modelValue":s[2]||(s[2]=e=>r(o)?o.value=e:null),dr:a(t),"onUpdate:dr":s[3]||(s[3]=e=>r(t)?t.value=e:null),"close-after":"",form:p.value,query:{company:a(i).params.cid},data:a(x),remove:m.value,submit:a(j)},null,8,["modelValue","dr","form","query","data","remove","submit"]),n(z,{modelValue:a(t),"onUpdate:modelValue":s[6]||(s[6]=e=>r(t)?t.value=e:null)},{default:_(()=>[l("div",_e,[l("button",{onClick:s[4]||(s[4]=e=>t.value=!1),class:"cancel"},"\u3044\u3044\u3048"),l("button",{onClick:s[5]||(s[5]=e=>T()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Ae as default};
