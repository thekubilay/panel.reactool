import{D as z}from"./vuedraggable.umd.js";import{a as N,p as m,q as P,t as I,v as x,f as i,z as a,H as v,w as _,x as l,a3 as O,b as j,R as T,K as d}from"./vendor.js";import{s as K}from"./menu.esm.js";import{u as L,a as M,S as Q,_ as G}from"./useFormRequestBuilder.js";import{_ as J}from"./FormQuery.js";import{_ as W}from"./DialogDelete.js";import{_ as X}from"./BarTool.js";import{f as Y}from"./FormRoute.js";import{A as Z,u as ee}from"../main.js";import{u as te}from"./useRightClickHandler.js";import"./overlayeventbus.esm.js";import"./plugin-vue_export-helper.js";import"./rules.js";const le={id:"project_routes",class:"relative panel-board"},se={class:"part-wrap"},ae={class:"spreadsheet-wrapper overflow-x"},oe=O('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8</div><div class="sheet-cell value flex align-center">\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30D1\u30CD\u30EB\u30CD\u30FC\u30E0</div><div class="sheet-cell value flex align-center">\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell value flex align-center">URL\u30D1\u30B9</div><div class="sheet-cell value flex align-center">\u30A2\u30AF\u30C6\u30A3\u30D6</div></div></div>',1),ue=["onClick","onContextmenu"],ne=l("div",{class:"sheet-cell handle flex align-center handle grab"},[l("i",{class:"pi pi-bars"})],-1),ie={class:"sheet-cell num flex align-center"},re={class:"text block"},ce={class:"sheet-cell sheet-cell value flex align-center"},de={class:"text block"},pe={class:"sheet-cell value flex align-center"},ve={class:"text block"},me={class:"sheet-cell value flex align-center"},_e={class:"text block"},fe={class:"sheet-cell value flex align-center"},he={class:"text block"},ge={class:"sheet-cell value flex align-center"},xe={class:"text block"},je={class:"sheet-cell value flex align-center"},be={class:"context block"},Ce={key:0,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#2ecc71"}},ke={key:1,class:"pi pi-circle-fill",style:{"font-size":"1rem",color:"#e74c3c"}},ye={class:"button-wrapper flex justify-end"},Ie=N({setup(Be){var k,y;const{get:f,save:D}=Z(),{submit:F,submitRowReorder:V,remove:b}=L(),{d:r,dr:n,data:u,useToggle:h}=M(),{rcm:w,rcmOpened:De,isRCOn:R}=te(u),{payload:Fe,content:c,progress:A,project:o}=ee(),g=m(!1),C=m(!1),p=m(((k=o.value)==null?void 0:k.routes)||[]),$=P({id:null,project:((y=o.value)==null?void 0:y.id)||null,order_id:null,component:null,name:null,panel_name:null,path:null,title:null,active:!1});function E(){var s;g.value=!1,h({method:"post",endpoints:["app/routes","project_details/"+((s=o.value)==null?void 0:s.id)],state:"project"})}function q(s){var e;g.value=!0,h({method:"patch",endpoints:["app/routes/"+s.id,"project_details/"+((e=o.value)==null?void 0:e.id)],state:"project"},s)}function U(){var s;C.value=!0,b("app/routes/"+((s=u.value)==null?void 0:s.id)).then(()=>{var e;n.value=!1,f("project_details/"+((e=o.value)==null?void 0:e.id),"project").then(()=>{r.value=!1,C.value=!1})})}const S=m([{label:"\u65B0\u898F\u30EB\u30FC\u30C8",command:()=>{var s;h({method:"post",endpoints:["app/routes","project_details/"+((s=o.value)==null?void 0:s.id)],state:"project"})}},{label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{var e;c.value=!0;const s={order_id:p.value?p.value.length+1:1,project:((e=o.value)==null?void 0:e.id)||null,component:u.value.component,name:u.value.name,path:u.value.path,title:u.value.title,active:u.value.active};D("app/routes",s).then(()=>{var t;f("project_details/"+((t=o.value)==null?void 0:t.id),"project").then(()=>{c.value=!1})})}},{label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{var s;c.value=!0,b("app/routes/"+((s=u.value)==null?void 0:s.id)).then(()=>{var e;f("project_details/"+((e=o.value)==null?void 0:e.id),"project").then(()=>{c.value=!1})})}}]);return I(()=>o.value,s=>{p.value=(s==null?void 0:s.routes)||[]}),(s,e)=>(j(),x("div",le,[i(Q,{modelValue:a(c),"onUpdate:modelValue":e[0]||(e[0]=t=>v(c)?c.value=t:null)},null,8,["modelValue"]),i(X,{class:"justify-space-between"},{default:_(()=>[l("div",se,[i(a(T),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u65BD\u8A2D",onClick:e[1]||(e[1]=t=>E())})])]),_:1}),l("div",ae,[oe,i(a(z),{tag:"div",onEnd:e[2]||(e[2]=t=>a(V)({value:p.value},{method:"post",endpoints:["app/routes","project_details/"+a(o).id],state:"project"})),list:p.value,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:_(({element:t,index:H})=>[l("div",{onClick:B=>q(t),onContextmenu:B=>a(R)(B,t),"aria-haspopup":"true","aria-controls":"plan_rc_menu",class:"sheet-row flex align-center list-group-item relative pointer"},[i(a(K),{id:"rc_menu",ref_key:"rcm",ref:w,class:"rc has-final-action",model:S.value,popup:!0},null,8,["model"]),ne,l("div",ie,[l("span",re,d(H+1),1)]),l("div",ce,[l("span",de,d(t.component),1)]),l("div",pe,[l("span",ve,d(t.name),1)]),l("div",me,[l("span",_e,d(t.panel_name),1)]),l("div",fe,[l("span",he,d(t.title),1)]),l("div",ge,[l("span",xe,d(t.path),1)]),l("div",je,[l("span",be,[t.active?(j(),x("i",Ce)):(j(),x("i",ke))])])],40,ue)]),_:1},8,["list"])]),i(G,{modelValue:a(r),"onUpdate:modelValue":e[8]||(e[8]=t=>v(r)?r.value=t:null),title:"\u30EB\u30FC\u30C8\u30D5\u30A9\u30FC\u30E0"},{default:_(()=>[i(J,{modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=t=>v(r)?r.value=t:null),dr:a(n),"onUpdate:dr":e[4]||(e[4]=t=>v(n)?n.value=t:null),"close-after":"",topProgress:"",progress:a(A),form:a(Y),data:a(u),remove:g.value,query:a($),submit:a(F)},null,8,["modelValue","dr","progress","form","data","remove","query","submit"]),i(W,{modelValue:a(n),"onUpdate:modelValue":e[7]||(e[7]=t=>v(n)?n.value=t:null)},{default:_(()=>[l("div",ye,[l("button",{onClick:e[5]||(e[5]=t=>n.value=!1),class:"cancel"},"\u3044\u3044\u3048"),l("button",{onClick:e[6]||(e[6]=t=>U()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Ie as default};
