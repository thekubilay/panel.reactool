import{d as g,r as A,a as d,b as v,k as a,w as o,e as s,t as b,u as e,J as E,D as k,H as c,o as q,l as f,c as w,g as D,M as R,N as I,U as H,T as L,m as M}from"./vendor.js";import{_ as z}from"./Icon.js";import{u as $,A as J}from"../main.js";import{a as Q,u as G,S as K,_ as O}from"./useFormRequestBuilder.js";import{_ as W}from"./BarTool.js";import{_ as X}from"./FormQuery.js";import{_ as Y}from"./DialogDelete.js";const Z={id:"bar_admin",class:"flex justify-space-between column-1"},ee={class:"mhw-container container flex align-center justify-end"},se={class:"username",style:{"font-size":".75rem"}},ae=g({setup(y){const{user:l}=$();return(m,x)=>{const u=A("router-link");return d(),v("header",Z,[a(u,{class:"brand flex align-center",to:"/"},{default:o(()=>[a(z,{svg:"reactool_black",width:"100px",style:{"padding-bottom":"2px"}})]),_:1}),s("div",ee,[s("div",se,b(e(l).username),1)])])}}});const te={id:"sidebar_admin"},ne={class:"part"},oe=c("\u4F1A\u793E "),le=c("\u30E6\u30FC\u30B6\u30FC "),ie=c("\u30B5\u30ED\u30F3 "),ue=c("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8 "),ce=c("\u30A2\u30D7\u30EA\u30EB\u30FC\u30C8 "),re=c("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u6A29\u9650 "),de=c("\u30CB\u30E5\u30FC\u30B9 "),me=c("\u30C4\u30FC\u30C8\u30FC\u30EA\u30A2\u30EB "),_e=c("\u30A8\u30E9\u30FC\u30ED\u30B0 "),pe={class:"part last"},ve=c("APP\u7BA1\u7406\u753B\u9762\u3078"),fe=["href"],xe=g({setup(y){const l=E(),{user:m}=$(),x=k(window.location.origin);return(u,C)=>{const i=A("router-link");return d(),v("div",te,[s("nav",null,[s("div",ne,[a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Admin",params:{cid:e(l).params.cid}}},{default:o(()=>[oe]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Users",params:{cid:e(l).params.cid}}},{default:o(()=>[le]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Salons",params:{cid:e(l).params.cid}}},{default:o(()=>[ie]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Projects",params:{cid:e(l).params.cid}}},{default:o(()=>[ue]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Routes",params:{cid:e(l).params.cid}}},{default:o(()=>[ce]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"ProjectPermissions",params:{cid:e(l).params.cid}}},{default:o(()=>[re]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"News",params:{cid:e(l).params.cid}}},{default:o(()=>[de]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"Tutorials",params:{cid:e(l).params.cid}}},{default:o(()=>[me]),_:1},8,["to"]),a(i,{class:"nav-item flex align-center","exact-active-class":"active",to:{name:"LogsError",params:{cid:e(l).params.cid}}},{default:o(()=>[_e]),_:1},8,["to"])]),s("div",pe,[a(i,{class:"flex align-center",to:{name:"Dashboard",params:{cid:e(m).company}}},{default:o(()=>[ve]),_:1},8,["to"]),s("a",{class:"flex align-center",href:x.value+"/admin/",target:"_blank"},"BE\u30E2\u30C7\u30EB\u7BA1\u7406\u3078",8,fe)])])])}}}),he=[[{classes:["flex"],elements:[{component:null,name:"InputText",db_column_name:"name",type:"text",model:null,label:"\u4F1A\u793E\u540D",hint:null,placeholder:"\u3007\u3007\u682A\u5F0F\u4F1A\u793E",required:!0,id:"company_name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]}]];const ge={class:"mrw"},Ae={class:"column-1 am"},be={class:"outer-contents flex"},$e={class:"inner-contents relative"},ye={class:"part-wrap"},Ce={key:1,class:"spreadsheet-wrapper overflow-x"},Fe=s("div",{class:"sh-container ss-container"},[s("div",{class:"sheet-row sheet-row-header flex align-center"},[s("div",{class:"sheet-cell num flex align-center"},"#"),s("div",{class:"sheet-cell value flex align-center"},"\u4F1A\u793E\u540D")])],-1),Be={class:"sb-container ss-container"},Ee=["onClick"],ke={class:"sheet-cell num flex align-center"},we={class:"text block"},De={class:"sheet-cell value flex align-center"},Ve={class:"text block"},je={class:"button-wrapper flex justify-end"},He=g({setup(y){const{get:l}=J(),m=E(),{payload:x,content:u,user:C,companies:i}=$(),{d:_,dr:r,data:F,useToggle:B}=Q(),{submit:V,remove:j}=G(),h=k(!1);q(()=>{C.value.company!==m.params.cid&&(u.value=!0,l("companies/"+m.params.cid,"company").then(()=>{u.value=!1}))});function T(){h.value=!1,B({method:"post",endpoints:["companies","companies"],state:"companies"})}function U(p){h.value=!0,B({method:"patch",endpoints:["companies/"+p.id,"companies"],state:"companies"},p)}function N(){var p;u.value=!0,x.value={method:"get",endpoints:["companies","companies"],state:"companies"},j("companies/"+((p=F.value)==null?void 0:p.id)).then(()=>{l("companies","companies").then(()=>{r.value=!1,_.value=!1,u.value=!1})})}return(p,n)=>{const P=A("router-view");return d(),v("div",ge,[s("main",Ae,[a(ae),s("div",be,[a(xe),s("div",$e,[a(K,{modelValue:e(u),"onUpdate:modelValue":n[0]||(n[0]=t=>f(u)?u.value=t:null)},null,8,["modelValue"]),e(m).name==="Admin"?(d(),w(W,{key:0,class:"justify-space-between"},{default:o(()=>[s("div",ye,[a(e(H),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u4F1A\u793E",onClick:n[1]||(n[1]=t=>T())})])]),_:1})):D("",!0),e(m).name==="Admin"?(d(),v("div",Ce,[Fe,s("div",Be,[(d(!0),v(R,null,I(e(i),(t,S)=>(d(),v("div",{key:t.id,onClick:Te=>U(t),class:"sheet-row flex align-center relative pointer"},[s("div",ke,[s("span",we,b(S+1),1)]),s("div",De,[s("span",Ve,b(t.name),1)])],8,Ee))),128))])])):D("",!0),a(O,{modelValue:e(_),"onUpdate:modelValue":n[7]||(n[7]=t=>f(_)?_.value=t:null),title:"\u4F1A\u793E\u30D5\u30A9\u30FC\u30E0"},{default:o(()=>[a(X,{modelValue:e(_),"onUpdate:modelValue":n[2]||(n[2]=t=>f(_)?_.value=t:null),dr:e(r),"onUpdate:dr":n[3]||(n[3]=t=>f(r)?r.value=t:null),"close-after":"",form:e(he),data:e(F),remove:h.value,query:{},submit:e(V)},null,8,["modelValue","dr","form","data","remove","submit"]),a(Y,{modelValue:e(r),"onUpdate:modelValue":n[6]||(n[6]=t=>f(r)?r.value=t:null)},{default:o(()=>[s("div",je,[s("button",{onClick:n[4]||(n[4]=t=>r.value=!1),class:"cancel"},"\u3044\u3044\u3048"),s("button",{onClick:n[5]||(n[5]=t=>N()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),a(P,{class:"contents column-1"},{default:o(({Component:t})=>[a(L,{name:"fade",mode:"out-in"},{default:o(()=>[(d(),w(M(t)))]),_:2},1024)]),_:1})])])])])}}});export{He as default};
