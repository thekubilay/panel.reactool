import{d as E,A as F,O as R,k as U,u as A,l as S,E as q,L as I,c as N,g as i,w as d,h as a,b as t,p,P as j,o as P,s as H,t as b}from"../main.js";import{s as L}from"./dropdown.esm.js";import{D as O}from"./vuedraggable.umd.js";import{_ as T}from"./Dialog.js";import{_ as z}from"./FormQuery.js";import{_ as G}from"./DialogDelete.js";import{_ as J}from"./BarTool.js";import{f as K}from"./FormSalon.js";import{u as M,a as Q}from"./useFormRequestBuilder.js";import"./index.esm.js";import"./virtualscroller.esm.js";import"./portal.esm.js";import"./_commonjsHelpers.js";import"./Spinner.js";import"./plugin-vue_export-helper.js";const W={id:"salons",class:"admin-board"},X={class:"part-wrap"},Y={class:"part-wrap part-end"},Z={class:"spreadsheet-wrapper overflow-x"},ee=j('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30B5\u30ED\u30F3\u540D</div></div></div>',1),se=["onClick"],te=a("div",{class:"sheet-cell handle flex align-center handle grab"},[a("i",{class:"pi pi-bars"})],-1),ae={class:"sheet-cell num flex align-center"},oe={class:"text block"},le={class:"sheet-cell sheet-cell-long value flex align-center"},ne={class:"text block"},ie={class:"button-wrapper flex justify-end"},De=E({__name:"Salons",setup(re){const{get:v}=F(),g=R(),r=U(),{d:n,dr:l,data:f,useToggle:_}=M(),{store:ue,progress:de,salons:pe,companies:x,company:m,content:u}=A(),{submit:y,submitRowReorder:V,remove:w}=Q(),c=S(!1),k=q({id:null,name:null,company:parseInt(r.params.cid+"")||null}),h=I({set(o){u.value=!0,g.push({params:{cid:o}}),v("companies/"+o,"company").then(()=>{u.value=!1})},get(){var o;return(o=m.value)==null?void 0:o.id}});function $(){c.value=!1,_({method:"post",endpoints:["salons","companies/"+r.params.cid],state:"company"})}function C(o){c.value=!0,_({method:"patch",endpoints:["salons/"+o.id,"companies/"+r.params.cid],state:"company"},o)}function B(){var o;u.value=!0,w("salons/"+((o=f.value)==null?void 0:o.id)).then(()=>{v("companies/"+r.params.cid,"company").then(()=>{l.value=!1,n.value=!1,u.value=!1})})}return(o,e)=>(P(),N("div",W,[i(J,{class:"justify-space-between"},{default:d(()=>[a("div",X,[i(t(H),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u30B5\u30ED\u30F3",onClick:e[0]||(e[0]=s=>$())})]),a("div",Y,[i(t(L),{style:{width:"140px"},class:"dropdown",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),"option-label":"name","option-value":"id",options:t(x)},null,8,["modelValue","options"])])]),_:1}),a("div",Z,[ee,i(t(O),{tag:"div",onEnd:e[2]||(e[2]=s=>t(V)({value:t(m).salons},{method:"post",endpoints:["salons","companies/"+t(r).params.cid],state:"company"})),list:t(m).salons,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:d(({element:s,index:D})=>[a("div",{onClick:me=>C(s),class:"sheet-row flex align-center list-group-item relative pointer"},[te,a("div",ae,[a("span",oe,b(s.order_id?s.order_id:D+1),1)]),a("div",le,[a("span",ne,b(s.name),1)])],8,se)]),_:1},8,["list"])]),i(T,{modelValue:t(n),"onUpdate:modelValue":e[8]||(e[8]=s=>p(n)?n.value=s:null),title:"\u30B5\u30ED\u30F3\u30D5\u30A9\u30FC\u30E0"},{default:d(()=>[i(z,{modelValue:t(n),"onUpdate:modelValue":e[3]||(e[3]=s=>p(n)?n.value=s:null),dr:t(l),"onUpdate:dr":e[4]||(e[4]=s=>p(l)?l.value=s:null),"close-after":"",form:t(K),query:k,data:t(f),remove:c.value,submit:t(y)},null,8,["modelValue","dr","form","query","data","remove","submit"]),i(G,{modelValue:t(l),"onUpdate:modelValue":e[7]||(e[7]=s=>p(l)?l.value=s:null)},{default:d(()=>[a("div",ie,[a("button",{onClick:e[5]||(e[5]=s=>l.value=!1),class:"cancel"},"\u3044\u3044\u3048"),a("button",{onClick:e[6]||(e[6]=s=>B()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{De as default};
