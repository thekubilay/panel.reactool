import{s as y}from"./dropdown.esm.js";import{d as N,A as S,u as M,k as H,O as L,l as c,L as E,D as O,m as z,c as F,g as r,w as p,b as s,f as w,p as m,P as G,o as _,h as u,s as J,e as K,t as h}from"../main.js";import{D as Q}from"./vuedraggable.umd.js";import{_ as W}from"./Dialog.js";import{_ as X}from"./FormQuery.js";import{_ as Y}from"./DialogDelete.js";import{_ as Z}from"./BarTool.js";import{a as ee,u as le}from"./useFormRequestBuilder.js";import"./index.esm.js";import"./virtualscroller.esm.js";import"./portal.esm.js";import"./_commonjsHelpers.js";import"./Spinner.js";import"./plugin-vue_export-helper.js";const te=[[{classes:["flex"],elements:[{component:null,name:"InputText",db_column_name:"title",type:"text",model:null,label:"\u30BF\u30A4\u30C8\u30EB",hint:null,placeholder:"\u30FC",required:!0,id:"title_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"InputText",db_column_name:"sub_title",type:"text",model:null,label:"\u30B5\u30D6\u30BF\u30A4\u30C8\u30EB",hint:null,placeholder:"\u30FC",required:!1,id:"sub_title_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"Textarea",db_column_name:"content",type:"text",model:null,label:"\u5185\u5BB9",hint:null,placeholder:"\u30FC",required:!1,rows:"6",cols:"10",id:"content_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"FileInput",db_column_name:"image",type:"text",model:null,label:"\u753B\u50CF",hint:".jpeg, .jpg, .png \u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u3059",required:!1,id:"image_input",preview_text:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306E\u305F\u3081\u3001\u30AF\u30EA\u30C3\u30AF\u3084\u753B\u50CF\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",limit:"1MB\u4EE5\u4E0B",accept:"image/*",rules:[],rule:null,disabled:!1,props:["placeholder","required","disabled","accept","hint","model","preview_text","limit","rule"],classes:["flex-column","column-1"]}]}]],ue={id:"admin-tutorials",class:"admin-board"},se={class:"part-wrap"},ae={class:"part-wrap part-end"},oe={key:0,class:"spreadsheet-wrapper overflow-x"},ne=G('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell value flex align-center">\u30BF\u30A4\u30D7</div><div class="sheet-cell sheet-cell-long value flex align-center">\u30BF\u30A4\u30C8\u30EB</div></div></div>',1),ie=["onClick"],re=u("div",{class:"sheet-cell handle flex align-center handle grab"},[u("i",{class:"pi pi-bars"})],-1),de={class:"sheet-cell num flex align-center"},ce={class:"text block"},pe={class:"sheet-cell sheet-cell value flex align-center"},me={class:"text block"},ve={class:"sheet-cell sheet-cell-long value flex align-center"},fe={class:"text block"},_e={class:"button-wrapper flex justify-end"},je=N({__name:"TutorialImages",setup(he){const{get:A}=S(),{store:be,progress:D,user:ge,companies:xe,company:Ce,users:Be,content:b,tutorials:v}=M(),{submit:V,remove:k,submitRowReorder:T}=ee(),{d:i,dr:n,data:g,useToggle:x}=le();H();const q=L(),f=c(!1),d=c("\u30D1\u30CD\u30EB"),a=c([]),$=["\u30D1\u30CD\u30EB","\u30A2\u30D7\u30EA","API"],o=c(),C=E({set(t){d.value=t,a.value=v.value.filter(e=>e.type===t)||[],a.value.length?o.value=a.value[0]:o.value={}},get(){return d.value}}),B=E({set(t){o.value=a.value.find(e=>e.id===t)},get(){return o.value.id}});function I(){q.push({name:"Tutorials"})}function R(){f.value=!1,x({method:"post",endpoints:["tutorial_images","tutorials"],state:"tutorials"})}function U(t){f.value=!0,x({method:"patch",endpoints:["tutorial_images/"+t.id,"tutorials"],state:"tutorials"},t)}function P(){var t;b.value=!0,k("tutorial_images/"+((t=g.value)==null?void 0:t.id)).then(()=>{A("tutorials","tutorials").then(e=>{n.value=!1,i.value=!1,b.value=!1})})}return O(()=>v.value,t=>{a.value=t.filter(e=>e.type===d.value)||[],a.value.length&&(o.value=a.value[0])}),z(()=>{a.value=v.value.filter(t=>t.type===d.value)||[],o.value=a.value[0]}),(t,e)=>(_(),F("div",ue,[r(Z,{class:"justify-space-between"},{default:p(()=>[u("div",se,[r(s(J),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u30D1\u30FC\u30C4",onClick:e[0]||(e[0]=l=>R())})]),u("div",ae,[r(s(y),{style:{width:"100px"},class:"dropdown",modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=l=>C.value=l),options:$},null,8,["modelValue"]),a.value.length?(_(),K(s(y),{key:0,style:{width:"200px"},class:"dropdown",modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=l=>B.value=l),"option-label":"title","option-value":"id",options:a.value},null,8,["modelValue","options"])):w("",!0),u("button",{onClick:e[3]||(e[3]=l=>I()),class:"tool-button"},"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB")])]),_:1}),o.value?(_(),F("div",oe,[ne,r(s(Q),{tag:"div",onEnd:e[4]||(e[4]=l=>s(T)({value:o.value.tutorial_images},{method:"post",endpoints:["tutorial_images","tutorials"],state:"tutorials"})),list:o.value.tutorial_images,class:"sb-container ss-container",handle:".handle","item-key":"id"},{item:p(({element:l,index:j})=>[u("div",{onClick:ye=>U(l),class:"sheet-row flex align-center list-group-item relative pointer"},[re,u("div",de,[u("span",ce,h(l.order_id?l.order_id:j+1),1)]),u("div",pe,[u("span",me,h(d.value),1)]),u("div",ve,[u("span",fe,h(l.title),1)])],8,ie)]),_:1},8,["list"])])):w("",!0),r(W,{modelValue:s(i),"onUpdate:modelValue":e[10]||(e[10]=l=>m(i)?i.value=l:null),title:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u30D5\u30A9\u30FC\u30E0",overflow:""},{default:p(()=>[r(X,{modelValue:s(i),"onUpdate:modelValue":e[5]||(e[5]=l=>m(i)?i.value=l:null),dr:s(n),"onUpdate:dr":e[6]||(e[6]=l=>m(n)?n.value=l:null),"close-after":"",form:s(te),onload:s(D)+"%",query:{tutorials:o.value.id},data:s(g),remove:f.value,submit:s(V)},null,8,["modelValue","dr","form","onload","query","data","remove","submit"]),r(Y,{modelValue:s(n),"onUpdate:modelValue":e[9]||(e[9]=l=>m(n)?n.value=l:null)},{default:p(()=>[u("div",_e,[u("button",{onClick:e[7]||(e[7]=l=>n.value=!1),class:"cancel"},"\u3044\u3044\u3048"),u("button",{onClick:e[8]||(e[8]=l=>P()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{je as default};
