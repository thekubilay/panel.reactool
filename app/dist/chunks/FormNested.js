import{a as w,C as k,o as E,Q as I,N as P,b as e,q as a,f as g,D as B,F as d,E as m,y as h,A as c,v as p,w as _,x as D,z,e as M,U as Q,t as y,g as H,K as N,V as K}from"./vendor.js";import{u as L,a as O,D as R,b as G,c as J,d as W}from"./FormQuery.js";import{S as X}from"./Spinner.js";import{a as Y}from"../main.js";const Z={key:0,class:"tabs flex align-center"},ee=["onClick"],ae=["onSubmit"],te={key:0,class:"label title-label"},se={class:"label flex"},le={key:0,class:"required flex align-start"},oe={key:1,class:"hint"},de=w({props:{modelValue:Boolean,loading:Boolean,selectedId:Number,activeTab:String,form:{type:Array,default:[]},onload:{type:String,default:""},progress:Number,tabs:Array},emits:["update:modelValue","update:response","update:payload","update:activeTab","update:form"],setup(n,{emit:S}){const f=n;Y();const{setDynamics:C}=G(),{setClear:U}=J(),{reform:v,setProps:F}=L(),{isElementValid:x}=W(),j=k(),r=k(!1),b=k(0);E(()=>{v.value=f.form,C(f.form.filter((o,s)=>s===b.value)).then(o=>{r.value=o})}),I(()=>{U(v.value),S("update:modelValue",!1)});const $=o=>{b.value=o,f.tabs&&S("update:activeTab",f.tabs[o])};return P(()=>b.value,o=>{r.value=!1,C(v.value).then(s=>{r.value=s})}),(o,s)=>(e(),a("div",{ref_key:"container",ref:j,id:"form"},[g(X,{modelValue:n.loading,"onUpdate:modelValue":s[0]||(s[0]=l=>B(loading)?loading.value=l:null),text:n.onload?n.onload:null},null,8,["modelValue","text"]),g(O,{id:"tpb",modelValue:n.progress,"onUpdate:modelValue":s[1]||(s[1]=l=>B(progress)?progress.value=l:null)},null,8,["modelValue"]),n.tabs?(e(),a("div",Z,[(e(!0),a(d,null,m(n.tabs,(l,i)=>(e(),a("button",{key:i,onClick:u=>$(i),class:h([{active:i===b.value},"tab flex align-center justify-center"])},c(l),11,ee))),128))])):p("",!0),g(R,{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=l=>r.value=l)},{default:_(()=>[D("form",{action:"",onSubmit:K(l=>!0,["prevent"])},[(e(!0),a(d,null,m(y(v),(l,i)=>(e(),a("div",{key:i},[(e(!0),a(d,null,m(l,(u,A)=>(e(),a("div",{key:A,class:h(["row",u.classes])},[u.elements[0].hasOwnProperty("title")?(e(),a("span",te,c(u.elements[0].title),1)):p("",!0),(e(!0),a(d,null,m(u.elements,(t,T)=>(e(),a("div",{key:T,class:h(t.classes)},[D("span",se,[z(c(t.label)+" ",1),t.required?(e(),a("span",le,"*\u5FC5\u9808")):p("",!0)]),t.component?(e(),M(H(t.component),Q({key:0,id:t.id},y(F)(t),{modelValue:t.model,"onUpdate:modelValue":V=>t.model=V,class:["cfec column-1",{error:!y(x)(t).valid}]}),null,16,["id","modelValue","onUpdate:modelValue","class"])):p("",!0),(e(!0),a(d,null,m(y(x)(t).errors,(V,q)=>(e(),a("span",{key:q,class:"invalid block"},"*"+c(V),1))),128)),t.hint&&t.name!=="FileInput"?(e(),a("span",oe,c(t.hint),1)):p("",!0)],2))),128))],2))),128)),N(o.$slots,"default")]))),128)),N(o.$slots,"actions")],40,ae)]),_:3},8,["modelValue"])],512))}});export{de as _};
