import{U as M,V as Q,p,t as D,z as S,a as U,q as W,o as H,Q as Y,b as C,e as G,w as y,v as j,f as J,M as X,x as g,K as Z,N as k,y as q,A as F,T as V}from"./vendor.js";import{u as A,A as ee}from"../main.js";function te(e){return M()?(Q(e),!0):!1}const b=typeof window!="undefined",oe=e=>typeof e=="string",P=()=>{};function B(e){var t;const o=S(e);return(t=o==null?void 0:o.$el)!=null?t:o}const z=b?window:void 0;b&&window.document;b&&window.navigator;b&&window.location;function $(...e){let t,o,u,i;if(oe(e[0])?([o,u,i]=e,t=z):[t,o,u,i]=e,!t)return P;let c=P;const m=D(()=>S(t),l=>{c(),!!l&&(l.addEventListener(o,u,i),c=()=>{l.removeEventListener(o,u,i),c=P})},{immediate:!0,flush:"post"}),f=()=>{m(),c()};return te(f),f}function ne(e,t,o={}){const{window:u=z}=o;if(!u)return;const i=p(!0),m=[$(u,"click",l=>{const s=B(e);!s||s===l.target||l.composedPath().includes(s)||!i.value||t(l)},{passive:!0,capture:!0}),$(u,"pointerdown",l=>{const s=B(e);i.value=!!s&&!l.composedPath().includes(s)},{passive:!0})];return()=>m.forEach(l=>l())}const x=typeof globalThis=="undefined"?void 0:globalThis,O="__vueuse_ssr_handlers__";x[O]=x[O]||{};x[O];var L,T;b&&(window==null?void 0:window.navigator)&&((L=window==null?void 0:window.navigator)==null?void 0:L.platform)&&/iP(ad|hone|od)/.test((T=window==null?void 0:window.navigator)==null?void 0:T.platform);var se=Object.defineProperty,R=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,I=(e,t,o)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ie=(e,t)=>{for(var o in t||(t={}))ae.call(t,o)&&I(e,o,t[o]);if(R)for(var o of R(t))le.call(t,o)&&I(e,o,t[o]);return e};const re={top:0,left:0,bottom:0,right:0,height:0,width:0};ie({text:""},re);const ue={class:"header flex align-center justify-space-between"},de={class:"title"},ce=g("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"12px",height:"12px",viewBox:"0 0 357 357","xml:space":"preserve"},[g("polygon",{points:"357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3     214.2,178.5   "})],-1),fe=[ce],we=U({props:{modelValue:Boolean,title:String,width:String,height:String,overflow:Boolean},emits:["update:modelValue","update:title"],setup(e,{emit:t}){const o=e,u=p(),i=p(!1),c=p(!1),m=W({width:o.width,height:o.height});D(()=>u.value,s=>{s&&document.addEventListener("keydown",l)}),H(()=>{c.value=o.overflow||!1}),D(()=>o.modelValue,s=>{i.value=!!s}),D(()=>o.overflow,s=>{c.value=s||!1}),Y(()=>{document.removeEventListener("keydown",l)});const f=p();function l(s){s&&s.keyCode===27&&t("update:modelValue",!1)}return ne(f,s=>{const v=[...s.target.classList].toString();s&&!v.includes("p-dropdown-item")&&!v.includes("p-")&&!v.includes("pi")&&v.length&&t("update:modelValue",!1)}),(s,v)=>(C(),G(V,{name:"fade",mode:"out-in"},{default:y(()=>[e.modelValue?(C(),j("div",{key:0,ref_key:"dialog",ref:u,class:"dialog-container flex align-center justify-center overflow-y-hidden"},[J(V,{name:"fade-scale"},{default:y(()=>[i.value?(C(),j("div",{key:0,style:X(S(m)),ref_key:"state",ref:f,class:"rf-dialog"},[g("div",ue,[g("h3",de,Z(e.title),1),g("button",{onClick:v[0]||(v[0]=N=>t("update:modelValue",!1)),class:"close"},fe)]),g("div",{class:q(["body",{"overflow-y":c.value}])},[k(s.$slots,"default")],2)],4)):F("",!0)]),_:3})],512)):F("",!0)]),_:3}))}});function he(){const{store:e}=A(),t=p(!1),o=p(!1),u=p(!1),i=p(!1),c=p(!1),m=p([]),f=p(null);return{d:t,d2:o,dpc:u,dr:i,dw:c,images:m,data:f,useToggle:(s,v=null)=>{e.SET_PAYLOAD(s),t.value=!t.value,f.value=v}}}function _e(){const{payload:e,onload:t,content:o}=A(),{get:u,save:i}=ee();function c(n){return new Date(n).toISOString().substring(0,10)}function m(n,r){return n==="start_date"||n==="end_date"||n==="remove_date"?c(r):r}const f=n=>{t.value="\u30ED\u30FC\u30C7\u30A3\u30F3\u30B0...",n.forEach((r,w)=>{w>0&&u(r,e.value.state).then(()=>{w===e.value.endpoints.length&&(o.value=!1,t.value="")})})},l=n=>new Promise((r,w)=>{i(e.value.endpoints[0],n,e.value.method).then(h=>{t.value="\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D",f(e.value.endpoints),r(h)})}),s=(n,r)=>(t.value="\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D",new Promise((w,h)=>{r&&r.forEach(a=>{a.forEach(K=>{K.elements.forEach(_=>{_.name==="FileInput"&&typeof _.model=="string"?n[_.db_column_name]=null:n[_.db_column_name]=m(_.db_column_name,_.model)})})});const d=new FormData,E=Object.keys(n);E.forEach(a=>{(n[a]||typeof n[a]=="boolean")&&(d.append(a,n[a]),a==="image"?(d.append("thumbnail",n[a]),E.includes("building_floor")||d.append("type",n[a].type)):a==="file"?(d.append("type",n[a].type.split("/")[1]),d.append("size",n[a].size)):a==="video"?d.append("size",n[a].size):a==="pdf"&&d.append("pdf_size",n[a].size))}),i(e.value.endpoints[0],d,e.value.method).then(a=>{f(e.value.endpoints),w(a)})}));return{submitAsFormObject:l,submitAsFormData:s,submitRowReorder:(n,r)=>(o.value=!0,new Promise((w,h)=>{e.value=r,n.value.forEach((E,a)=>{E.order_id=a+1});const d={reordered:n.value};l(d).then(()=>{f(e.value.endpoints),o.value=!1,w(!0)})})),submit:(n,r,w="formData")=>new Promise(h=>{w==="formData"&&r?s(n,r).then(d=>{h(d)}):l(n).then(d=>{h(d)})}),remove:n=>new Promise(r=>{i(n,{},"delete").then(()=>{r(!0)})})}}export{we as _,he as a,ne as o,_e as u};
