import{d as O,j as z,k as G,A as J,u as K,r as _,l as Q,w as W,c as y,b as a,f as s,z as d,q as f,e as u,F as X,s as Y,a1 as Z,o as p,L as x,y as D,g as k,t as B}from"../main.js";import{s as ee}from"./menu.esm.js";import{S as te}from"./Spinner.js";import{_ as le}from"./BarTool.js";import{_ as se}from"./FormQuery.js";import{_ as ue}from"./Dialog.js";import{_ as ae}from"./DialogDelete.js";import{_ as oe}from"./ContextImagesThumbnailContainer.js";import{_ as ne}from"./Icon.js";import{u as re,a as ie}from"./useFormRequestBuilder.js";import{u as de}from"./useRightClickHandler.js";import"./portal.esm.js";import"./plugin-vue_export-helper.js";const C=[[{classes:["flex","justify-space-between"],elements:[{component:null,name:"InputText",db_column_name:"plan_type",type:"text",model:null,label:"\u9593\u53D6\u308A\u30BF\u30A4\u30D7",hint:null,placeholder:"AB type",required:!0,id:"name_input",rules:[],disabled:!1,props:["placeholder","required","disabled"],classes:["flex-column","column-1"]}]},{classes:["flex"],elements:[{component:null,name:"FileInput",db_column_name:"image",type:"text",model:null,label:"\u9593\u53D6\u308A\u30BF\u30A4\u30D7\u753B\u50CF",hint:".jpeg, .png \u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u3059",required:!0,id:"plan_type_image_input",preview_text:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306E\u305F\u3081\u3001\u30AF\u30EA\u30C3\u30AF\u3084\u753B\u50CF\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",limit:"1MB\u4EE5\u4E0B",accept:"image/*",rules:[],rule:null,disabled:!1,props:["placeholder","required","disabled","accept","hint","model","image_path","preview_text","limit","rule"],classes:["flex-column","column-1"]}]}]];const pe={id:"project_room_vr",class:"panel-board relative"},ce={class:"part-wrap"},me={class:"part-wrap part-end"},ve={class:"spreadsheet-wrapper overflow-x"},_e=Z('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell handle flex align-center"></div><div class="sheet-cell num flex align-center">\u9806\u756A</div><div class="sheet-cell img flex align-center"><i class="pi pi-file"></i></div><div class="sheet-cell value sheet-cell-long flex align-center">\u9593\u53D6\u308A\u30BF\u30A4\u30D7</div></div></div>',1),fe={class:"sb-container ss-container"},ge=["onClick","onContextmenu"],be=u("div",{class:"sheet-cell handle flex align-center"},null,-1),he={class:"sheet-cell num flex align-center"},ye={class:"text block"},xe={class:"sheet-cell img flex align-center"},Ce={class:"sheet-cell value flex align-center"},Fe={class:"text block"},Ve={class:"button-wrapper flex justify-end"},Le=O({__name:"ProjectRoomVrTypes",setup(je){const F=z(),c=G(),{get:w,save:Ae}=J(),{submit:V,submitRowReorder:De,remove:R}=re(),{d:n,dr:o,data:m,images:v,useToggle:j}=ie(),{rcm:E,rcmOpened:ke,isRCOn:$}=de(m),{user:q,payload:I,content:g,progress:Be,project:r}=K(),b=_([]),h=_(!1),i=_(!1),P=_([{icon:"pi pi-plus",label:"\u65B0\u898F\u753B\u50CF",command:()=>{}},{icon:"pi pi-copy",label:"\u884C\u3092\u8907\u88FD\u3059\u308B",command:()=>{}},{icon:"pi pi-trash",label:"\u884C\u3092\u524A\u9664\u3059\u308B",command:()=>{}}]);Q(()=>{var t;b.value=((t=r.value)==null?void 0:t.room_vr)||[]});function S(){var t;h.value=!1,v.value=[],C[0][1].elements[0].required=!0,j({method:"post",endpoints:["app/room_vrs","project_details/"+((t=r.value)==null?void 0:t.id)],state:"project"})}function U(t){var e;h.value=!0,v.value=t.image?[{image:t.image}]:[],C[0][1].elements[0].required=!1,j({method:"patch",endpoints:["app/room_vrs/"+t.id,"project_details/"+((e=r.value)==null?void 0:e.id)],state:"project"},t)}function N(t){var e;i.value=!0,I.value={method:"patch",endpoints:["app/room_vrs/"+m.value.id,"project_details/"+((e=r.value)==null?void 0:e.id)],state:"project"},V({image:null},null,"object").then(()=>{i.value=!1,v.value=[]})}function T(){var t;i.value=!0,R("app/room_vrs/"+((t=m.value)==null?void 0:t.id)).then(()=>{var e;o.value=!1,w("project_details/"+((e=r.value)==null?void 0:e.id),"project").then(()=>{n.value=!1,i.value=!1})})}const M=()=>{F.push({name:"ProjectRoomVrFloors",params:{cid:c.params.cid,dynid:c.params.dynid}})},H=()=>{F.push({name:"ProjectRoomVrVendors",params:{cid:c.params.cid,dynid:c.params.dynid}})};return W(()=>{var t;return(t=r.value)==null?void 0:t.room_vr},t=>{b.value=t||[]}),(t,e)=>(p(),y("div",pe,[a(te,{modelValue:s(g),"onUpdate:modelValue":e[0]||(e[0]=l=>d(g)?g.value=l:null)},null,8,["modelValue"]),a(le,{class:"justify-space-between"},{default:f(()=>[u("div",ce,[a(s(x),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"VR\u30D7\u30E9\u30F3\u8FFD\u52A0",onClick:e[1]||(e[1]=l=>S())})]),u("div",me,[a(s(x),{style:{"margin-left":"5px"},onClick:e[2]||(e[2]=l=>M()),type:"button",class:"tool-button",label:"VR\u4E00\u89A7\u3078"}),s(q).is_superuser?(p(),D(s(x),{key:0,style:{"margin-left":"5px"},onClick:e[3]||(e[3]=l=>H()),type:"button",class:"tool-button",label:"\u30D9\u30F3\u30C0VR\u4E00\u89A7\u3078"})):k("",!0)])]),_:1}),u("div",ve,[_e,u("div",fe,[(p(!0),y(X,null,Y(b.value,(l,L)=>(p(),y("div",{key:l.id,onClick:A=>U(l),onContextmenu:A=>s($)(A,l),"aria-haspopup":"true","aria-controls":"plan_rc_menu",class:"sheet-row flex align-center list-group-item relative pointer"},[a(s(ee),{id:"rc_menu",ref_for:!0,ref_key:"rcm",ref:E,class:"rc has-final-action",model:P.value,popup:!0},null,8,["model"]),be,u("div",he,[u("span",ye,B(L+1),1)]),u("div",xe,[l.image?(p(),D(ne,{key:0,svg:"image"})):k("",!0)]),u("div",Ce,[u("span",Fe,B(l.plan_type),1)])],40,ge))),128))])]),a(ue,{modelValue:s(n),"onUpdate:modelValue":e[9]||(e[9]=l=>d(n)?n.value=l:null),title:"\u9593\u53D6\u308A\u30BF\u30A4\u30D7\u30D5\u30A9\u30FC\u30E0"},{default:f(()=>[a(se,{modelValue:s(n),"onUpdate:modelValue":e[4]||(e[4]=l=>d(n)?n.value=l:null),dr:s(o),"onUpdate:dr":e[5]||(e[5]=l=>d(o)?o.value=l:null),"close-after":"",form:s(C),data:s(m),remove:h.value,loading:i.value,query:{project:s(r).id},submit:s(V)},{default:f(()=>[a(oe,{containerId:"plan_type_image_input",images:s(v),remove:N},null,8,["images"])]),_:1},8,["modelValue","dr","form","data","remove","loading","query","submit"]),a(ae,{modelValue:s(o),"onUpdate:modelValue":e[8]||(e[8]=l=>d(o)?o.value=l:null)},{default:f(()=>[u("div",Ve,[u("button",{onClick:e[6]||(e[6]=l=>o.value=!1),class:"cancel"},"\u3044\u3044\u3048"),u("button",{onClick:e[7]||(e[7]=l=>T()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Le as default};
