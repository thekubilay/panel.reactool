import{a as q,p as v,q as S,v as c,f as a,w as _,x as e,I as N,J as U,z as o,H as b,a4 as R,E as I,b as m,S as T,K as x,B as z,a2 as H,y as C,A as O,C as h}from"./vendor.js";import J from"./dropdown.esm.js";import{s as K}from"./editor.esm.js";import{a as L,u as M,_ as P}from"./useFormRequestBuilder.js";import{_ as G}from"./DialogDelete.js";import{_ as Q}from"./BarTool.js";import{A as W,u as X}from"../main.js";import{S as Y}from"./Spinner.js";import"./overlayeventbus.esm.js";import"./virtualscroller.esm.js";import"./plugin-vue_export-helper.js";const Z={id:"admin-app-news",class:"admin-board"},ee={class:"part-wrap"},se={class:"spreadsheet-wrapper overflow-x"},te=R('<div class="sh-container ss-container"><div class="sheet-row sheet-row-header flex align-center"><div class="sheet-cell num flex align-center">#</div><div class="sheet-cell value flex align-center">\u30CB\u30E5\u30FC\u30B9\u7A2E\u985E</div><div class="sheet-cell sheet-cell-long flex align-center">\u30BF\u30A4\u30C8\u30EB</div><div class="sheet-cell sheet-cell-long flex align-center">\u516C\u958B\u65E5</div></div></div>',1),le={class:"sb-container ss-container"},oe=["onClick"],ne=e("div",{class:"sheet-cell num flex align-center"},null,-1),ae={class:"sheet-cell value flex align-center"},ue={class:"text block"},ie={class:"sheet-cell sheet-cell-long flex align-center"},re={class:"text block"},de={class:"sheet-cell value flex align-center"},ce={class:"text block"},me={id:"form"},pe=["onSubmit"],fe={class:"row flex justify-space-between"},ve={class:"flex-column column-1 relative"},_e=e("span",{class:"label flex"},[h("\u30CB\u30E5\u30FC\u30B9\u7A2E\u985E"),e("span",{class:"required flex align-start"},"*\u5FC5\u9808")],-1),xe={class:"row flex justify-space-between"},he={class:"flex-column column-1 relative"},we=e("span",{class:"label flex"},[h("\u30BF\u30A4\u30C8\u30EB"),e("span",{class:"required flex align-start"},"*\u5FC5\u9808")],-1),ge={class:"row flex justify-space-between"},be={class:"flex-column column-1 relative"},Ce=e("span",{class:"label flex"},[h("\u5185\u5BB9"),e("span",{class:"required flex align-start"},"*\u5FC5\u9808")],-1),ye={class:"action-wrapper flex align-center"},Be=e("button",{class:"flex align-center justify-center cancel"},"\u4E2D\u6B62",-1),Ve={class:"button-wrapper flex justify-end"},Te=q({setup(je){const{get:p}=W();I();const{payload:y,content:w,user:Ee,news:B}=X(),{d:i,dr:u,data:V,useToggle:g}=L(),{remove:j,submitAsFormObject:E}=M(),f=v(!1),l=S({type:{required:!0,model:"\u30D1\u30D6\u30EA\u30C3\u30AF",error:!1},title:{required:!0,model:null,error:!1},content:{required:!0,model:null,error:!1}}),F=v(["\u4F1A\u793E\u7528","\u30D1\u30D6\u30EA\u30C3\u30AF"]),d=v(!1);function A(){f.value=!1,l.type.model="\u30D1\u30D6\u30EA\u30C3\u30AF",l.title.model=null,l.content.model=null,g({method:"post",endpoints:["news","news"],state:"news"})}function k(n){f.value=!0,g({method:"patch",endpoints:["news/"+n.id,"news"],state:"news"},n),l.type.model=n.type,l.title.model=n.title,l.content.model=n.content}function $(){var n;w.value=!0,y.value={method:"get",endpoints:["news","news"],state:"news"},j("news/"+((n=V.value)==null?void 0:n.id)).then(()=>{p("news","news").then(()=>{u.value=!1,i.value=!1,w.value=!1})})}function D(){d.value=!0;let n=[];const s={type:l.type.model,title:l.title.model,content:l.content.model};Object.keys(l).forEach(r=>{(l[r].model===""||!l[r].model)&&(l[r].error=!0,n.push(r))}),n.length||E(s).then(()=>p("news","news")).then(()=>{p("users/current","user").then(()=>{d.value=!1,i.value=!1,u.value=!1})})}return(n,s)=>(m(),c("div",Z,[a(Q,{class:"justify-space-between"},{default:_(()=>[e("div",ee,[a(o(T),{type:"button",class:"submit-button",icon:"pi pi-plus","icon-pos":"left",label:"\u65B0\u898F\u6A29\u9650",onClick:s[0]||(s[0]=t=>A())})])]),_:1}),e("div",se,[te,e("div",le,[(m(!0),c(N,null,U(o(B),t=>(m(),c("div",{onClick:r=>k(t),class:"sheet-row flex align-center list-group-item relative pointer"},[ne,e("div",ae,[e("span",ue,x(t.type),1)]),e("div",ie,[e("span",re,x(t.title),1)]),e("div",de,[e("span",ce,x(t.created_at),1)])],8,oe))),256))])]),a(P,{modelValue:o(i),"onUpdate:modelValue":s[10]||(s[10]=t=>b(i)?i.value=t:null),title:"\u30CB\u30E5\u30FC\u30B9\u30D5\u30A9\u30FC\u30E0"},{default:_(()=>[a(Y,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t)},null,8,["modelValue"]),e("div",me,[e("form",{action:"",onSubmit:z(t=>!1,["prevent"])},[e("div",fe,[e("div",ve,[_e,a(o(J),{class:"cfec",modelValue:o(l).type.model,"onUpdate:modelValue":s[2]||(s[2]=t=>o(l).type.model=t),options:F.value},null,8,["modelValue","options"])])]),e("div",xe,[e("div",he,[we,a(o(H),{class:C(["cfec",{error:o(l).title.error}]),modelValue:o(l).title.model,"onUpdate:modelValue":s[3]||(s[3]=t=>o(l).title.model=t)},null,8,["class","modelValue"])])]),e("div",ge,[e("div",be,[Ce,a(o(K),{class:C({error:o(l).title.error}),modelValue:o(l).content.model,"onUpdate:modelValue":s[4]||(s[4]=t=>o(l).content.model=t)},null,8,["class","modelValue"])])]),e("div",ye,[Be,f.value?(m(),c("button",{key:0,onClick:s[5]||(s[5]=t=>u.value=!0),class:"flex align-center justify-center remove"},"\u524A\u9664")):O("",!0),e("button",{onClick:s[6]||(s[6]=t=>D()),class:"flex align-center justify-center submit-or-next"},"\u767B\u9332")])],40,pe)]),a(G,{modelValue:o(u),"onUpdate:modelValue":s[9]||(s[9]=t=>b(u)?u.value=t:null)},{default:_(()=>[e("div",Ve,[e("button",{onClick:s[7]||(s[7]=t=>u.value=!1),class:"cancel"},"\u3044\u3044\u3048"),e("button",{onClick:s[8]||(s[8]=t=>$()),class:"delete"},"\u306F\u3044")])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}});export{Te as default};
